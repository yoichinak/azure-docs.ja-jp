---
title: インクルード ファイル
description: インクルード ファイル
services: storage
author: tamram
ms.service: storage
ms.topic: include
ms.date: 03/26/2018
ms.author: jeking
ms.custom: include file
ms.openlocfilehash: f5b6e0e74bbab33b9ae6fbacca5c55ea434d3e41
ms.sourcegitcommit: d4c076beea3a8d9e09c9d2f4a63428dc72dd9806
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/01/2018
ms.locfileid: "39399959"
---
geo 冗長ストレージ (GRS) は、プライマリ リージョンから数百マイル離れたセカンダリ リージョンにデータをレプリケートすることで、通年で少なくとも 99.99999999999999% (シックスティーンナイン) の持続性をオブジェクトに確保するように設計されています。 ご使用のストレージ アカウントで GRS が有効になっている場合は、地域的な停電やプライマリ リージョンが復旧できない災害が発生しても、データは保持されます。

GRS を選択する場合は、関連する 2 つの選択肢から選択できます。

* GRS は、セカンダリ リージョンの別のデータセンターにデータをレプリケートしますが、Microsoft がプライマリ リージョンからセカンダリ リージョンへのフェールオーバーを開始する場合にのみ、そのデータを読み取ることができます。 
* 読み取りアクセス geo 冗長ストレージ (RA-GRS) は GRS に基づいています。 RA-GRS は、セカンダリ リージョンの別のデータセンターにデータをレプリケートします。また、セカンダリ リージョンから読み取るオプションもあります。 RA-GRS を使用すると、Microsoft がプライマリからセカンダリへのフェールオーバーを開始するかどうかにかかわらず、セカンダリから読み取ることができます。 

GRS または RA-GRS が有効なストレージ アカウントでは、すべてのデータが最初にローカル冗長ストレージ (LRS) でレプリケートされます。 更新は、まずプライマリの場所にコミットされ、LRS を使用してレプリケートされます。 更新は、GRS を使用してセカンダリ リージョンに非同期にレプリケートされます。 データがセカンダリの場所に書き込まれると、LRS を使用してその場所内にもレプリケートされます。 

プライマリ リージョンとセカンダリ リージョンの両方が、ストレージ スケール ユニット内の異なる障害ドメインとアップグレード ドメイン間でレプリカを管理します。 ストレージ スケール ユニットは、データセンター内の基本的なレプリケーション ユニットです。 このレベルのレプリケーションは LRS で提供されています。詳細については、「[ローカル冗長ストレージ (LRS): Azure Storage の低コストのデータ冗長性](../articles/storage/common/storage-redundancy-lrs.md)」を参照してください。

使用するレプリケーション オプションを決定するときは、次の点に注意してください。

* ゾーン冗長ストレージ (ZRS) は同期レプリケーションの可用性を高めるため、シナリオによっては GRS または RA-GRS よりも適した選択肢となります。 ZRS の詳細については、[ZRS](../articles/storage/common/storage-redundancy-zrs.md) に関するページを参照してください。
* 非同期レプリケーションには遅延が伴うため、地域的な災害が発生した場合にデータをプライマリ リージョンから復旧できないと、セカンダリ リージョンにまだレプリケートされていない変更は失われます。
* GRS では、Microsoft がセカンダリ リージョンへのフェールオーバーを開始しない限り、レプリカは利用できません。 Microsoft がセカンダリ リージョンへのフェールオーバーを開始した場合、フェールオーバーの完了後、そのデータへの読み取り/書き込みアクセスができるようになります。 詳細については、「[障害復旧のガイダンス](../articles/storage/common/storage-disaster-recovery-guidance.md)」を参照してください。
* アプリケーションがセカンダリ リージョンから読み取る必要がある場合は、RA-GRS を有効にします。

## <a name="read-access-geo-redundant-storage"></a>読み取りアクセス geo 冗長ストレージ

読み取りアクセス geo 冗長ストレージ (RA-GRS) は、ストレージ アカウントの可用性を最大化します。 RA-GRS は、2 つのリージョンにまたがる geo レプリケーションだけでなく、セカンダリ ロケーションにあるデータに対する読み取り専用アクセスを提供します。

セカンダリ リージョンのデータに対して読み取り専用アクセスを有効にすると、ご利用のストレージ アカウントのプライマリ エンドポイントだけでなく、セカンダリ エンドポイントのデータも使用できます。 セカンダリ エンドポイントはプライマリ エンドポイントと似ていますが、アカウント名に `–secondary` というサフィックスが追加されます。 たとえば、Blob service のプライマリ エンドポイントが `myaccount.blob.core.windows.net` の場合、セカンダリ エンドポイントは `myaccount-secondary.blob.core.windows.net` になります。 ストレージ アカウントのアクセス キーは、プライマリ エンドポイントとセカンダリ エンドポイントの両方で同じです。

RA-GRS 使用時の考慮事項:

* RA-GRS を使うときは、通信対象のエンドポイントをアプリケーションで管理する必要があります。
* 非同期レプリケーションには遅延が伴うため、地域的な災害が発生した場合にデータをプライマリ リージョンから復旧できないと、セカンダリ リージョンにまだレプリケートされていない変更は失われる可能性があります。
* ストレージ アカウントの最後の同期時刻を確認できます。 最後の同期時刻は、GMT 日付/時刻の値です。 最後の同期時刻より前にプライマリに対して書き込まれたデータはすべて、セカンダリ ロケーションに対して正常に書き込まれています。つまり、これらのデータは、セカンダリ ロケーションから読み取ることができます。 最後の同期時刻より後にプライマリに対して書き込まれたデータに関しては、読み取りできる場合とできない場合とがあります。 この値を、[Azure Portal](https://portal.azure.com/)、[Azure PowerShell](../articles/storage/common/storage-powershell-guide-full.md)、または Azure Storage クライアント ライブラリの 1 つを使用して、クエリできます。
* Microsoft がセカンダリ リージョンへのフェールオーバーを開始した場合、フェールオーバーの完了後、そのデータへの読み取り/書き込みアクセスができるようになります。 詳細については、[ディザスター リカバリーのガイダンス](../articles/storage/common/storage-disaster-recovery-guidance.md)をご覧ください。
* セカンダリ リージョンに切り替える方法については、「[Azure Storage の停止が発生した場合の対処方法](../articles/storage/common/storage-disaster-recovery-guidance.md)」を参照してください。
* RA-GRS は高可用性を目的として作られています。 スケーラビリティのガイダンスについては、[パフォーマンス チェックリスト](../articles/storage/common/storage-performance-checklist.md)をご覧ください。
* RA-GRS を使用して高可用性を確保するためのお勧めの設計方法については、「[RA-GRS を使用した高可用性アプリケーションの設計](../articles/storage/common/storage-designing-ha-apps-with-ragrs.md)」を参照してください。

## <a name="what-is-the-rpo-and-rto-with-grs"></a>GRS の RPO や RTO とは何ですか。
**Recovery Point Objective (RPO: 目標復旧ポイント):** GRS と RA-GRS のストレージ サービスでは、データがプライマリ ロケーションからセカンダリ ロケーションに非同期的に geo レプリケートされます。 プライマリ リージョンで大規模な地域災害が発生した場合、Microsoft はセカンダリ リージョンに対してフェールオーバーを実行します。 フェールオーバーが発生した場合、geo レプリケートされていない最近の変更が失われる可能性があります。 将来的に生じうるデータ消失までの時間 (分単位) を RPO といい、これはデータの復旧できる過去の時点を表します。 現在、geo レプリケーションの所要時間を規定する SLA はありませんが、Azure Storage では RPO を 15 分未満とするのが一般的です。

**Recovery Time Objective (RTO: 目標復旧時間):** RTO は、フェールオーバーを実行してストレージ アカウントをオンラインに戻すまでにかかる時間の指標です。 フェールオーバーの所要時間には、次のアクションが含まれます。

   * プライマリ ロケーションでデータを復旧できるか、あるいはフェールオーバーが必要かどうかを、Microsoft が決定するまでに要する時間。
   * プライマリ DNS エントリの参照先をセカンダリ ロケーションに変更することで、ストレージ アカウントのフェールオーバーを実行する時間。

   Microsoft にはお客様のデータを保持する重大な責任があります。 プライマリ リージョンでデータを復旧できる可能性があれば、Microsoft はフェールオーバーを遅らせ、お客様のデータを復旧することに注力します。 このサービスの今後のバージョンでは、ご自身で RTO を制御できるよう、お客様がアカウント レベルでのフェールオーバーをトリガーできるようにする予定です。

## <a name="paired-regions"></a>ペアになっているリージョン 

ストレージ アカウントの作成時に、アカウントのプライマリ リージョンを選択します。 ペアのセカンダリ リージョンはプライマリ リージョンに基づいて決定され、変更することはできません。 Azure でサポートされているリージョンに関する最新の情報については、「[ビジネス継続性とディザスター リカバリー (BCDR): Azure のペアになっているリージョン](../articles/best-practices-availability-paired-regions.md)」を参照してください。
