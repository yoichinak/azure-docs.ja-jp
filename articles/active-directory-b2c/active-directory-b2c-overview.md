---
title: Azure Active Directory B2C とは | Microsoft Docs
description: Azure Active Directory B2C を使用してアプリケーションのサインイン エクスペリエンスの作成と管理を行う方法について説明します。
services: active-directory-b2c
author: davidmu1
manager: mtillman
ms.service: active-directory
ms.workload: identity
ms.topic: overview
ms.date: 04/05/2018
ms.author: davidmu
ms.component: B2C
ms.openlocfilehash: 6949ab89cf806818783c86199e6df334e263b046
ms.sourcegitcommit: 86cb3855e1368e5a74f21fdd71684c78a1f907ac
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/03/2018
ms.locfileid: "37440883"
---
# <a name="what-is-azure-active-directory-b2c"></a>Azure Active Directory B2C とは

Azure Active Directory (Azure AD) B2C は、アプリケーション使用時の顧客のサインアップ、サインイン、プロファイル管理をカスタマイズして制御できる ID 管理サービスです。 ここでは、特に iOS、Android、.NET 用に開発されたアプリケーションが対象です。 Azure AD B2C は、これらのアクションを可能にする一方で、同時に顧客 ID を保護します。

Azure AD B2C に登録されているアプリケーションを構成し、さまざまな ID 管理操作を実行することができます。 次に例をいくつか示します。

- 顧客がサインアップして、登録されているアプリケーションを使用できるようにする
- サインアップした顧客がサインインし、アプリケーションの使用を開始できるようにする
- サインアップした顧客がプロファイルを編集できるようにする
- アプリケーションで多要素認証を有効にする
- 顧客が特定の ID プロバイダーを使用してサインアップとサインインを行えるようにする
- アプリケーションから、ビルドする API へのアクセスを許可する
- サインアップとサインインのエクスペリエンスの外観をカスタマイズする
- アプリケーションのシングル サインオン セッションを管理する

## <a name="what-do-i-need-to-think-about-before-using-azure-ad-b2c"></a>Azure AD B2C の使用前に検討する必要のある事項

- 顧客にどのようにアプリケーションを操作させたいか
- 顧客にどのようなユーザー インターフェイス (UI) エクスペリエンスを提供するか
- アプリケーション内から顧客にどの ID プロバイダーを選択させたいか
- サインイン プロセスで追加の API を実行する必要があるか

### <a name="customer-interaction"></a>顧客の操作

Azure AD B2C は、すべての顧客エクスペリエンスで [OpenID Connect](https://openid.net/connect/) をサポートしています。 Azure AD B2C の OpenID Connect の実装では、アプリケーションは Azure AD B2C に認証要求を発行することで、このユーザー体験を開始します。 要求の結果は `id_token`です。 このセキュリティ トークンは、顧客の ID を表します。

Azure AD B2C を使用しているすべてのアプリケーションは、Azure Portal を使用して Azure AD B2C テナントに登録する必要があります。 登録プロセスでは、値が収集され、対象のアプリケーションに割り当てられます。 これらの値には、アプリケーションとリダイレクト URI を一意に識別するアプリケーション ID が含まれており、これを使用して、応答をアプリケーションに戻す指示を出せます。

すべてのアプリケーションによるやり取りは、次のような大まかなパターンに従って行われます。

1. アプリケーションが、ポリシーを実行するように顧客に指示します。
2. 顧客がポリシーの定義に従ってポリシーを完了します。
3. アプリケーションがセキュリティ トークンを受け取ります。
4. アプリケーションはセキュリティ トークンを使って、保護されたリソースへのアクセスを試みます。
5. リソース サーバーは、セキュリティ トークンを検証し、アクセスを許可できることを確認します。
6. アプリケーションは、セキュリティ トークンを定期的に更新します。

これらの手順は、構築しているアプリケーションの種類によりわずかに異なることがあります。

Azure AD B2C は、ID プロバイダー、顧客、その他のシステムとやり取りし、ローカル ディレクトリを順次操作して ID タスクを完了します。 たとえば、顧客のサインイン、新規顧客の登録、パスワードのリセットなどです。 マルチパーティの信頼を確立してこれらの手順を完了する、基になるこのプラットフォームは、Identity Experience Framework と呼ばれます。 このフレームワークとポリシー (ユーザー体験または信頼フレームワーク ポリシーとも呼ばれます) が、完了するアクター、アクション、プロトコル、および一連の手順を明示的に定義しています。

Azure AD B2C は、さまざまな方法で、アプリケーションに対するサービス拒否攻撃やパスワード攻撃からの保護を行います。 Azure AD B2C は、SYN Cookie や速度と接続の制限などの検出と軽減策の手法を使用して、サービス拒否攻撃かリソースを保護します。 ブルート フォース パスワード攻撃とディクショナリ パスワード攻撃に対しても、軽減策が用意されています。

#### <a name="built-in-policies"></a>組み込みのポリシー

Azure AD B2C に送信される各要求は、ポリシーを指定します。 ポリシーは、アプリケーションが Azure AD B2C とやり取りする動作を制御します。 サインアップ、サインイン、プロファイルの編集などの最も一般的な ID タスクについては、組み込みのポリシーが事前に定義されています。  たとえば、サインアップのポリシーを使用して次の設定を構成し、動作を制御できます。

- 顧客がアプリケーションのサインアップのために使用できるソーシャル アカウント
- 名や郵便番号など、顧客から収集されたデータ
- 多要素認証
- すべてのサインアップ ページの外観
- アプリケーションに返される情報

#### <a name="custom-policies"></a>カスタム ポリシー 

[カスタム ポリシー](active-directory-b2c-overview-custom.md)は、Azure AD B2C テナント内の Identity Experience Framework の動作を定義する構成ファイルです。 カスタム ポリシーは、多くのタスクを完了するために完全に編集できます。 カスタム ポリシーは、階層型チェーンで互いを参照する 1 つまたは複数の XML 形式ファイルとして表されます。 

Azure AD B2C テナントでは必要に応じてさまざまな種類のカスタム ポリシーを複数使用でき、複数のアプリケーションにわたってポリシーを再利用できます。 この柔軟性により、最小限のコード変更で、またはコードをまったく変更せずに、顧客の ID エクスペリエンスを定義および変更できます。 ポリシーは、HTTP 認証要求に特別なクエリ パラメーターを追加すると使用できます。

カスタム ポリシーは、ユーザー体験を制御するために次の方法で使用できます。

- API との相互作用を定義し、追加情報のキャプチャ、顧客が指定した要求の確認、または外部プロセスのトリガーを行う。
- API からの要求または *migrationStatus* などのディレクトリ内での要求に基づいて動作を変更する。
- 組み込みポリシーの対象となっていない任意のワークフロー。 たとえば、サインイン エクスペリエンス中に顧客からより多くの情報を収集し、リソースにアクセスするための承認チェックを実行します。

### <a name="identity-providers"></a>ID プロバイダー

ID プロバイダー は、顧客 ID を認証し、セキュリティ トークンを発行するサービスです。 Azure AD B2C では、テナント内で、Microsoft アカウント、Facebook、Amazon などに代表される多数の ID プロバイダーを構成できます。 

Azure AD B2C テナントで ID プロバイダーを構成するには、作成する ID プロバイダー アプリケーションからの、アプリケーション ID またはクライアント ID と、パスワードまたはクライアント シークレットを記録する必要があります。 この ID とパスワードはその後、アプリケーションを構成するのに使用されます。

### <a name="user-interface-experience"></a>ユーザー インターフェイス エクスペリエンス

顧客に表示される HTML および CSS コンテンツのほとんどを制御できます。 ページ UI のカスタマイズ機能を使用して、任意のポリシーの外観をカスタマイズします。 さらに、アプリケーションと Azure AD B2C との間で、ブランドと視覚的な一貫性を維持することもできます。

Azure AD B2C は、顧客のブラウザーでコードを実行し、クロス オリジン リソース共有 (CORS) と呼ばれる最新の手法を使用します。 最初に、カスタマイズした HTML コンテンツを含むポリシーで URL を指定します。 Azure AD B2C により、UI 要素が URL から読み込まれた HTML コンテンツとマージされ、ユーザーにページが表示されます。

クエリ文字列で Azure AD B2C にパラメーターを送信できます。 パラメーターを HTML エンドポイントに渡すことで、ページのコンテンツを動的に変更することができます。 たとえば、Web またはモバイル アプリケーションから渡すパラメーターに基づいて、Azure AD B2C サインアップまたはサインイン ページの背景イメージを変更できます。

## <a name="how-do-i-get-started-with-azure-ad-b2c"></a>Azure AD B2C の使用を開始する方法

Azure AD B2C では、テナントは組織を表しており、ユーザーのディレクトリとなっています。 各 Azure AD B2C テナントは、他の Azure AD B2C テナントと区別され分離されています。 テナントには、アプリケーションを使用するためにサインアップした顧客に関する情報が含まれています。 たとえば、パスワード、プロファイル データ、アクセス許可が含まれます。

すべての機能を有効にして使用料を支払うには、Azure AD B2C テナントを Azure サブスクリプションにリンクする必要があります。 Azure AD B2C 顧客がアプリケーションにサインインできるようにするには、Azure AD B2C テナントにアプリケーションを登録する必要があります。

Azure AD B2C を使用するようアプリケーションを構成する前に、まず Azure AD B2C テナントを作成し、アプリケーションを登録する必要があります。 アプリケーションを登録するには、「[チュートリアル: アプリケーションを登録して Azure AD B2C を使用したサインアップとサインインを有効にする](tutorial-register-applications.md)」の手順を完了します。
  
ASP.NET Web アプリケーション開発者である場合は、「[チュートリアル: Web アプリケーションが Azure AD B2C を使用してアカウントを認証できるようにする](active-directory-b2c-tutorials-web-app.md)」の手順を使用して、アカウントを認証するようにアプリケーションを設定します。

デスクトップ アプリケーション開発者である場合は、「[チュートリアル: デスクトップ アプリケーションが Azure AD B2C を使用してアカウントを認証できるようにする](active-directory-b2c-tutorials-desktop-app.md)の手順を使用して」アカウントを認証するようにアプリケーションを設定します。

Node.js を使用するシングルページ アプリケーションの開発者である場合は、「[チュートリアル: シングルページ アプリケーションが Azure AD B2C を使用してアカウントを認証できるようにする](active-directory-b2c-tutorials-spa.md)」の手順を使用して、アカウントを認証するようにアプリケーションを設定します。

## <a name="next-steps"></a>次の手順

次のチュートリアルを続けて、サインアップおよびサインイン エクスペリエンスのためのアプリケーションの構成を開始します。

> [!div class="nextstepaction"]
> [チュートリアル: アプリケーションを登録して Azure AD B2C を使用したサインアップとサインインを有効にする](tutorial-register-applications.md)
