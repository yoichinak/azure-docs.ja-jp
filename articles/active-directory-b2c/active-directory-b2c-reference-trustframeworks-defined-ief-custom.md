---
title: リファレンス - Azure Active Directory B2C の信頼フレームワーク | Microsoft Docs
description: Azure Active Directory B2C のカスタム ポリシーと Identity Experience Framework に関するトピック。
services: active-directory-b2c
author: davidmu1
manager: mtillman
ms.service: active-directory
ms.workload: identity
ms.topic: conceptual
ms.date: 08/04/2017
ms.author: davidmu
ms.component: B2C
ms.openlocfilehash: 00d2f37068c5bedb17ba9a4064d1f5058f5ab72c
ms.sourcegitcommit: bf522c6af890984e8b7bd7d633208cb88f62a841
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/20/2018
ms.locfileid: "39185781"
---
# <a name="define-trust-frameworks-with-azure-ad-b2c-identity-experience-framework"></a>Azure AD B2C Identity Experience Framework で信頼フレームワークを定義する

Identity Experience Framework を使う Azure Active Directory B2C (Azure AD B2C) カスタム ポリシーは、組織に集中型のサービスを提供します。 このサービスは、大規模な関係者コミュニティで ID フェデレーションの複雑さを軽減します。 複雑さは、1 つの信頼関係と、1 つのメタデータ交換に削減されます。

Identity Experience Framework を使う Azure AD B2C カスタム ポリシーを利用すると、以下の質問に答えられるようになります。

- 遵守しなければならない法的ポリシー、セキュリティ ポリシー、プライバシー ポリシー、データ保護ポリシーとは何か。
- 連絡先はだれか。認定参加者になるためのプロセスとはどのようなものか。
- 認定 ID 情報プロバイダー ("要求プロバイダー" とも呼ばれます) はだれか。何を提供するのか。
- 認定証明書利用者はだれか。何を必要とするのか (任意)。
- 参加者に求められる技術的な "ネットワーク上の" 相互運用性要件とは。
- デジタル ID 情報の交換に関して適用される必要がある "ランタイム" 運用ルールとは。

これらの質問すべてに回答するために、Identity Experience Framework を使う Azure AD B2C カスタム ポリシーでは、信頼フレームワーク (TF) コンストラクトを使っています。 では、このコンストラクトと、それが何に役立つかを考えてみましょう。

## <a name="understand-the-trust-framework-and-federation-management-foundation"></a>信頼フレームワークとフェデレーションの管理基盤について

信頼フレームワークは、関係者コミュニティの参加者が準拠しなければならない ID、セキュリティ、プライバシー、データ保護の各ポリシーについて記述された仕様です。

フェデレーション ID は、インターネット規模でのエンド ユーザー ID 保証を実現するための基盤となります。 ID 管理を第三者に委任することで、エンド ユーザー用の単一のデジタル ID を複数の証明書利用者が再利用できます。  

ID 保証を実現するには、ID プロバイダー (IdP) と属性プロバイダー (AtP) が、特定のセキュリティ、プライバシー、運用に関するポリシーと実施方法に従う必要があります。  直接の検査を実行できない場合、証明書利用者 (RP) は、連携することに決めた IdP および AtP との信頼関係を構築する必要があります。  

デジタル ID 情報の利用者と提供者の数が増大するにつれ、このような信頼関係の対ごとの管理や、ネットワークの接続性に必要な技術メタデータの対ごとの交換を継続的に行うことが難しくなります。  フェデレーション ハブでは、こうした問題を限定的にしか解決できていません。

### <a name="what-a-trust-framework-specification-defines"></a>信頼フレームワークの仕様では何が定義されているか
TF は Open Identity Exchange (OIX) の信頼フレームワーク モデルの要であり、このモデルでは、各関係者コミュニティが特定の TF 仕様によって管理されます。 このような TF 仕様によって、以下のような点が定義されます。

- **以下の定義を含む関係者コミュニティのセキュリティおよびプライバシー メトリック:**
    - 参加者によって提供または要求される保証のレベル (LOA)。たとえば、デジタル ID 情報の信頼性に関する信頼評価値の順序付けされたセット。
    - 参加者によって提供または要求される保護のレベル (LOP)。たとえば、関係者コミュニティの参加者が扱うデジタル ID 情報の保護に関する信頼評価値の順序付けされたセット。

- 
  **参加者によって提供または要求されるデジタル ID 情報についての説明**。

- **デジタル ID 情報の作成と使用、および LOA と LOP の測定に関する技術ポリシー。このような文書化されたポリシーには、通常、以下のようなカテゴリが含まれています。**
    - ID 証明ポリシー。例: *個人の ID 情報がどれだけ詳細に審査されているか。*
    - セキュリティ ポリシー。例: *情報の整合性と機密性がどれだけ強力に保護されているか。*
    - プライバシー ポリシー。例: *個人を特定できる情報 (PII) をユーザーがどのように管理できるか。*
    - 存続可能性ポリシー。例: *プロバイダーが運用を中止した場合の PII 機能の継続性と保護。*

- **デジタル ID 情報の作成と使用に関する技術プロファイル。このプロファイルには、以下のものが含まれます。**
    - 指定された LOA でデジタル ID 情報を提供するためのスコープのインターフェイス。
    - ネットワーク上の相互運用性に関する技術要件。

- **コミュニティの参加者が実行できるさまざまなロールと、それらのロールを果たすために必要とされる資格についての説明。**

このように、TF 仕様によって関係者コミュニティの参加者 (証明書利用者、ID および属性プロバイダー、属性検証者) 間における ID 情報の交換方法が決まります。

TF 仕様は、関係者コミュニティのガバナンスに関する参照として機能し、コミュニティ内でのデジタル ID 情報のアサーションと使用を規定する 1 つまたは複数のドキュメントです。 TF 仕様は、関係者コミュニティのメンバー間でオンライン トランザクションに使用されるデジタル ID の信頼を確立するために設計され、ドキュメント化された、一連のポリシーと手順です。  

言い換えれば、TF 仕様には、コミュニティのために実行可能なフェデレーション ID エコシステムを作成するためのルールが定義されています。

現在、このようなアプローチの利点について広く合意が得られています。 信頼フレームワーク仕様によって、検証可能なセキュリティ、保証、およびプライバシー特性を備えたデジタル ID エコシステムの開発が容易になることには疑問の余地がなく、複数の関係者コミュニティ間でエコシステムを再利用できることになります。

このような理由から、Identity Experience Framework を使った Azure AD B2C カスタム ポリシーでは、相互運用性を促進するために、仕様を TF のデータ表現の基盤として使っています。  

Identity Experience Framework を活用した Azure AD B2C カスタム ポリシーでは、TF 仕様を、人とコンピューターが読み取れるデータの混合物として表します。 このモデルの一部のセクション (通常は、よりガバナンスに向けたセクション) は、発行済みのセキュリティおよびプライバシー ポリシーに関するドキュメントと、関連する手順 (存在する場合) への参照として表されます。 その他のセクションでは、運用の自動化を促進する、構成メタデータとランタイム ルールが詳細に記述されます。

## <a name="understand-trust-framework-policies"></a>信頼フレームワーク ポリシーについて

実装の面では、TF 仕様は、ID の動作とエクスペリエンスを完全に制御できるようにするポリシーのセットから構成されます。  Identity Experience Framework を活用した Azure AD B2C カスタム ポリシーでは、そのような宣言型のポリシーを通じて、以下に示す内容の定義と構成が可能な独自の TF を作成できます。

- TF に関連するコミュニティのフェデレーション ID エコシステムを定義している単数または複数のドキュメントの参照。 これは TF ドキュメントへのリンクです。 要求の交換と使用を自動化/制御する (定義済みの) "ランタイム" 運用ルールまたはユーザー体験。 このユーザー体験は LOA (および LOP) に関連付けられています。 このため、1 つのポリシーに、さまざまな LOA (および LOP) のユーザー体験が含まれる可能性があります。

- 関係者コミュニティ内の ID および属性プロバイダー、または要求プロバイダーと、コミュニティでサポートされている技術プロファイル、およびコミュニティに関連する (アウトオブバンド) LOA/LOP 認定。

- 属性検証者や要求プロバイダーとの統合。

- コミュニティ内の証明書利用者 (推定)。

- 参加者間でネットワーク通信を確立するためのメタデータ。 このメタデータは、証明書利用者と他のコミュニティ参加者との間に "ネットワーク上の" 相互運用性を組み込むため、技術プロファイルと共にトランザクション中に使用されます。

- 必要に応じたプロトコル変換 (例: SAML 2.0、OAuth2、WS-Federation、OpenID Connect)。

- 認証要件。

- 多要素オーケストレーション (必要な場合)。

- 利用できるすべての要求と関係者コミュニティの参加者へのマッピングに関する共有スキーマ。

- 要求の交換と使用を維持するためのすべての要求変換と、その場合に可能なデータ最小化。

- バインディングと暗号化。

- 要求ストレージ。

### <a name="understand-claims"></a>要求について

> [!NOTE]
> エンド ユーザーの認証資格情報、ID 審査、通信デバイス、物理的な場所、個人を特定できる属性などについての要求を含む、交換される可能性があるすべての種類の ID 情報をまとめて要求と呼びます。  
>
> オンラインのトランザクションでは、これらのデータ アーティファクトは証明書利用者が直接検証できるファクトではないため、"属性" ではなく "要求" という用語を使っています。 これらはむしろ、エンド ユーザーから要求されたトランザクションを許可するために、証明書利用者が十分な信頼を築く必要があるという事実についてのアサーション (要求) なのです。  
>
> "要求" という用語を使っているのは、Identity Experience Framework を使った Azure AD B2C カスタム ポリシーが、ユーザー認証や属性の取得の基盤となるプロトコルが定義されているかどうかに関係なく、一貫した方法ですべての種類のデジタル ID 情報の交換を簡易化できるように設計されているためでもあります。  同様に、ID プロバイダー、属性プロバイダー、属性検証者の特定の機能を区別したくない場合に、それらをまとめて指す用語として、"要求プロバイダー" を使用します。   

上記のように、これらの定義によって証明書利用者、ID および属性プロバイダー、属性検証者の間での ID 情報の交換方法が決まります。 また、証明書利用者の認証にどの ID および属性プロバイダーが必要かという点が、これらの定義によって制御されます。 これらは、継承、*if* ステートメント、ポリモーフィズムを備え、特定のアプリケーション ドメインに特化したコンピューター言語である、ドメイン固有言語 (DSL) だと考える必要があります。

これらのポリシーは、Identity Experience Framework を活用する Azure AD B2C カスタム ポリシー内の、コンピューターが読み取り可能な TF コンストラクトの一部を構成します。 ポリシーには、要求プロバイダーのメタデータと技術プロファイル、要求スキーマの定義、要求変換機能、運用の調整と自動化を容易にするために書き込まれるユーザー体験を含め、運用上の詳細がすべて含められます。  

時間が経過すれば、ポリシーで宣言されたアクティブな参加者に関する内容は変化する可能性が高いため、ポリシーは*生きたドキュメント*になると想定されています。 参加者であるための条件が変わる可能性もあります。  

一連のポリシー (によって表されるコミュニティ) への別の要求プロバイダー/検証者の参加や脱退に伴う信頼および接続性の再構成から証明書利用者を保護することにより、フェデレーションのセットアップとメンテナンスは大幅に簡易化できます。

相互運用性は、もう 1 つの大きな課題です。 証明書利用者が必要なすべてのプロトコルをサポートしている可能性は低いため、追加のクレーム プロバイダー/検証者を統合する必要があります。 Azure AD B2C カスタム ポリシーは、業界標準のプロトコルをサポートし、証明書利用者と属性プロバイダーが同じプロトコルをサポートしていない場合に要求を置き換える特定のユーザー体験を適用することで、この問題を解決します。  

ユーザー体験には、証明書利用者と他の参加者の間に "ネットワーク上の" 相互運用性を組み込むために使用される、プロトコル プロファイルとメタデータが含まれています。 また、TF 仕様の一部として発行されたポリシーへのコンプライアンスを強制するために、ID 情報の交換要求/応答メッセージに適用されるランタイム運用ルールもあります。 ユーザー体験は、カスタマー エクスペリエンスのカスタマイズの鍵となる概念です。 システムがプロトコル レベルでどのように機能するかも明らかにされます。

このようなしくみを基に、証明書利用者アプリケーションとポータルでは、コンテキストに応じて Identity Experience Framework を活用した Azure AD B2C カスタム ポリシーを呼び出し、その際に特定のポリシーの名前を渡すことで、面倒やリスクを伴わずに必要な動作と情報交換を正確に行うことができます。
