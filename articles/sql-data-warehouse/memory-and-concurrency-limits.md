---
title: メモリおよび同時実行の制限 - Azure SQL Data Warehouse | Microsoft Docs
description: Azure SQL Data Warehouse のさまざまなパフォーマンス レベルとリソース クラスに割り当てられたメモリおよび同時実行の制限を表示します。
services: sql-data-warehouse
author: ronortloff
manager: craigg-msft
ms.service: sql-data-warehouse
ms.topic: conceptual
ms.component: manage
ms.date: 07/10/2018
ms.author: rortloff
ms.reviewer: igorstan
ms.openlocfilehash: 802dbcdf797147d4f4dcf7835aea9c952127113e
ms.sourcegitcommit: 0a84b090d4c2fb57af3876c26a1f97aac12015c5
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/11/2018
ms.locfileid: "38652270"
---
# <a name="memory-and-concurrency-limits-for-azure-sql-data-warehouse"></a>Azure SQL Data Warehouse のメモリおよび同時実行の制限
Azure SQL Data Warehouse のさまざまなパフォーマンス レベルとリソース クラスに割り当てられたメモリおよび同時実行の制限を表示します。 詳細について確認し、ワークロード管理計画にこれらの機能を適用するには、「[ワークロード管理用のリソース クラス](resource-classes-for-workload-management.md)」を参照してください。 

現在、SQL Data Warehouse には Gen1 と Gen2 の 2つの世代が存在します。 データ ウェアハウスのワークロードで最高のパフォーマンスを得るには、Gen2 の SQL Data Warehouse をご利用することをお勧めします。 Gen2 には、最も頻繁にアクセスされるデータを CPU に近い場所に維持する、新しい NVMe SSD キャッシュが導入されています。 これは、最も集中的で要求の厳しいワークロードのリモート I/O を削除します。 パフォーマンスに加えて、Gen2 は 30,000 個の Data Warehouse ユニットへのスケールアップが可能で、無制限の単票形式ストレージを提供することにより、最大レベルのスケールをお届けします。 引き続き、前世代 (Gen1) の SQL Data Warehouse はサポートされ、同じ機能が維持されますが、早い時期に [Gen2 へのアップグレード](upgrade-to-latest-generation.md)されることをお勧めします。 

## <a name="data-warehouse-capacity-settings"></a>データ ウェアハウスの容量設定
次の表は、さまざまなパフォーマンス レベルでのデータ ウェアハウスの最大容量を示しています。 パフォーマンス レベルを変更するには、[コンピューティングのスケーリング (ポータル)](quickstart-scale-compute-portal.md) に関するページを参照してください。

### <a name="gen2"></a>Gen2

Gen2 は、Gen 1 と比べると 1 つのクエリに対して 2.5 倍のメモリを提供します。 この追加メモリにより、Gen2 で高速なパフォーマンスが実現可能です。  Gen2 のパフォーマンス レベルは、DW1000c から DW30000c の範囲となっています。 

| パフォーマンス レベル | コンピューティング ノード | コンピューティング ノードごとの配布 | データ ウェアハウスあたりのメモリ (GB) |
|:-----------------:|:-------------:|:------------------------------:|:------------------------------:|
| DW1000c           | 2             | 30                             |   600                          |
| DW1500c           | 3             | 20                             |   900                          |
| DW2000c           | 4             | 15                             |  1200                          |
| DW2500c           | 5             | 12                             |  1500                          |
| DW3000c           | 6             | 10                             |  1800                          |
| DW5000c           | 10            | 6                              |  3000                          |
| DW6000c           | 12            | 5                              |  3600                          |
| DW7500c           | 15            | 4                              |  4500                          |
| DW10000c          | 20            | 3                              |  6000                          |
| DW15000c          | 30            | 2                              |  9000                          |
| DW30000c          | 60            | 1                              | 18000                          |

最大 Gen2 DWU は DW30000c で、60 のコンピューティング ノードと、コンピューティング ノードごとに 1 つの配布です。 たとえば、DW30000c の 600 TB のデータ ウェアハウスは、コンピューティング ノードあたり約 10 TB を処理します。

### <a name="gen1"></a>Gen1

Gen1 のサービス レベルは、DW100 から DW6000 の範囲となっています。 

| パフォーマンス レベル | コンピューティング ノード | コンピューティング ノードごとの配布 | データ ウェアハウスあたりのメモリ (GB) |
|:-----------------:|:-------------:|:------------------------------:|:------------------------------:|
| DW100             | 1             | 60                             |  24                            |
| DW200             | 2             | 30                             |  48                            |
| DW300             | 3             | 20                             |  72                            |
| DW400             | 4             | 15                             |  96                            |
| DW500             | 5             | 12                             | 120                            |
| DW600             | 6             | 10                             | 144                            |
| DW1000            | 10            | 6                              | 240                            |
| DW1200            | 12            | 5                              | 288                            |
| DW1500            | 15            | 4                              | 360                            |
| DW2000            | 20            | 3                              | 480                            |
| DW3000            | 30            | 2                              | 720                            |
| DW6000            | 60            | 1                              | 1440                           |

## <a name="concurrency-maximums"></a>同時実行の最大値
各クエリを効率的に実行するために十分なリソースが提供されるよう、SQL Data Warehouse は各クエリに同時実行スロットを割り当てることで、リソース使用率を追跡します。 システムは、十分な数の[同時実行スロット](resource-classes-for-workload-management.md#concurrency-slots)が利用できるようになるまで、クエリをキューに入れて待機させます。 同時実行スロットによって、CPU の優先順位付けも決定されます。 詳細については、[ワークロードの分析](analyze-your-workload.md)に関するページを参照してください。

### <a name="gen2"></a>Gen2
 
**静的リソース クラス**

次の表は、[静的なリソース クラス](resource-classes-for-workload-management.md)ごとの最大の同時実行クエリ数と同時実行スロット数を示しています。  

| Service Level | 同時クエリの最大数 | 割り当てられる同時実行スロット数 |staticrc10 | staticrc20 | staticrc30 | staticrc40 | staticrc50 | staticrc60 | staticrc70 | staticrc80 |
|:-------------:|:--------------------------:|:---------------------------:|:---------:|:----------:|:----------:|:----------:|:----------:|:----------:|:----------:|:----------:|
| DW1000c       | 32                         |   40                        | 1         | 2          | 4          | 8          | 16         | 32         | 32         |  32        |
| DW1500c       | 32                         |   60                        | 1         | 2          | 4          | 8          | 16         | 32         | 32         |  32        |
| DW2000c       | 48                         |   80                        | 1         | 2          | 4          | 8          | 16         | 32         | 64         |  64        |
| DW2500c       | 48                         |  100                        | 1         | 2          | 4          | 8          | 16         | 32         | 64         |  64        |
| DW3000c       | 64                         |  120                        | 1         | 2          | 4          | 8          | 16         | 32         | 64         |  64        |
| DW5000c       | 64                         |  200                        | 1         | 2          | 4          | 8          | 16         | 32         | 64         | 128        |
| DW6000c       | 128                        |  240                        | 1         | 2          | 4          | 8          | 16         | 32         | 64         | 128        |
| DW7500c       | 128                        |  300                        | 1         | 2          | 4          | 8          | 16         | 32         | 64         | 128        |
| DW10000c      | 128                        |  400                        | 1         | 2          | 4          | 8          | 16         | 32         | 64         | 128        |
| DW15000c      | 128                        |  600                        | 1         | 2          | 4          | 8          | 16         | 32         | 64         | 128        |
| DW30000c      | 128                        | 1200                        | 1         | 2          | 4          | 8          | 16         | 32         | 64         | 128        |

**動的リソース クラス**

> [!NOTE]
> Gen2 の smallrc リソース クラスは、サービス レベルが増加するとともに、メモリを動的に追加し、最大 32 の同時実行クエリのみをサポートします。  smallrc によって使用される同時実行スロットとメモリが増加するにつれて、サービス レベルが増加します。 
>
>

次の表は、[動的なリソース クラス](resource-classes-for-workload-management.md)ごとの最大の同時実行クエリ数と同時実行スロット数を示しています。 Gen1 とは異なり、Gen2 の動的なリソース クラスは真に動的です。  Gen2 は、すべてのサービス レベルにおいて small-medium-large-xlarge リソース クラスに対して 3-10-22-70 のメモリ割り当て率を使用します。

| Service Level | 同時クエリの最大数 | 割り当てられる同時実行スロット数 | smallrc で使用されるスロット数 | mediumrc で使用されるスロット数 | largerc で使用されるスロット数 | xlargerc で使用されるスロット数 |
|:-------------:|:--------------------------:|:---------------------------:|:---------------------:|:----------------------:|:---------------------:|:----------------------:|
| DW1000c       | 32                         |   40                        | 1                     |  4                     |  8                    |  28                    |
| DW1500c       | 32                         |   60                        | 1                     |  6                     |  13                   |  42                    |
| DW2000c       | 32                         |   80                        | 2                     |  8                     |  17                   |  56                    |
| DW2500c       | 32                         |  100                        | 3                     | 10                     |  22                   |  70                    |
| DW3000c       | 32                         |  120                        | 3                     | 12                     |  26                   |  84                    |
| DW5000c       | 32                         |  200                        | 6                     | 20                     |  44                   | 140                    |
| DW6000c       | 32                         |  240                        | 7                     | 24                     |  52                   | 168                    |
| DW7500c       | 32                         |  300                        | 9                     | 30                     |  66                   | 210                    |
| DW10000c      | 32                         |  400                        | 12                    | 40                     |  88                   | 280                    |
| DW15000c      | 32                         |  600                        | 18                    | 60                     | 132                   | 420                    |
| DW30000c      | 32                         | 1200                        | 36                    | 120                    | 264                   | 840                    |



#### <a name="gen1"></a>Gen1

静的リソース クラス

次の表は、**Gen1** の[静的なリソース クラス](resource-classes-for-workload-management.md)ごとの最大の同時実行クエリ数と同時実行スロット数を示しています。

| サービス レベル | 同時クエリの最大数 | 最大同時実行スロット数 |staticrc10 | staticrc20 | staticrc30 | staticrc40 | staticrc50 | staticrc60 | staticrc70 | staticrc80 |
|:-------------:|:--------------------------:|:-------------------------:|:---------:|:----------:|:----------:|:----------:|:----------:|:----------:|:----------:|:----------:|
| DW100         | 4                          |   4                       | 1         | 2          | 4          | 4          |  4         |  4         |  4         |   4        |
| DW200         | 8                          |   8                       | 1         | 2          | 4          | 8          |  8         |  8         |  8         |   8        |
| DW300         | 12                         |  12                       | 1         | 2          | 4          | 8          |  8         |  8         |  8         |   8        |
| DW400         | 16                         |  16                       | 1         | 2          | 4          | 8          | 16         | 16         | 16         |  16        |
| DW500         | 20                         |  20                       | 1         | 2          | 4          | 8          | 16         | 16         | 16         |  16        |
| DW600         | 24                         |  24                       | 1         | 2          | 4          | 8          | 16         | 16         | 16         |  16        |
| DW1000        | 32                         |  40                       | 1         | 2          | 4          | 8          | 16         | 32         | 32         |  32        |
| DW1200        | 32                         |  48                       | 1         | 2          | 4          | 8          | 16         | 32         | 32         |  32        |
| DW1500        | 32                         |  60                       | 1         | 2          | 4          | 8          | 16         | 32         | 32         |  32        |
| DW2000        | 48                         |  80                       | 1         | 2          | 4          | 8          | 16         | 32         | 64         |  64        |
| DW3000        | 64                         | 120                       | 1         | 2          | 4          | 8          | 16         | 32         | 64         |  64        |
| DW6000        | 128                        | 240                       | 1         | 2          | 4          | 8          | 16         | 32         | 64         | 128        |

動的リソース クラス
> [!NOTE]
> Gen1 の smallrc リソース クラスは、静的なリソース クラス staticrc10 と似たような方式で、1 つのクエリに対して固定量のメモリを割り当てます。  smallrc は静的なので、128 の同時実行クエリへのスケールが可能です。 
>
>

次の表は、**Gen1** の[動的なリソース クラス](resource-classes-for-workload-management.md)ごとの最大の同時実行クエリ数と同時実行スロット数を示しています。

| サービス レベル | 同時クエリの最大数 | 割り当てられる同時実行スロット数 | smallrc | mediumrc | largerc | xlargerc |
|:-------------:|:--------------------------:|:---------------------------:|:-------:|:--------:|:-------:|:--------:|
| DW100         |  4                         |   4                         | 1       |  1       |  2      |   4      |
| DW200         |  8                         |   8                         | 1       |  2       |  4      |   8      |
| DW300         | 12                         |  12                         | 1       |  2       |  4      |   8      |
| DW400         | 16                         |  16                         | 1       |  4       |  8      |  16      |
| DW500         | 20                         |  20                         | 1       |  4       |  8      |  16      |
| DW600         | 24                         |  24                         | 1       |  4       |  8      |  16      |
| DW1000        | 32                         |  40                         | 1       |  8       | 16      |  32      |
| DW1200        | 32                         |  48                         | 1       |  8       | 16      |  32      |
| DW1500        | 32                         |  60                         | 1       |  8       | 16      |  32      |
| DW2000        | 48                         |  80                         | 1       | 16       | 32      |  64      |
| DW3000        | 64                         | 120                         | 1       | 16       | 32      |  64      |
| DW6000        | 128                        | 240                         | 1       | 32       | 64      | 128      |


これらのいずれかのしきい値に達すると、新しいクエリはキューに配置されます。キューに配置されたクエリは、先入れ先出し方式で実行されます。  クエリが完了してクエリおよびスロットの数が制限値を下回ると、キューに入れられていたクエリは解放されます。 

## <a name="next-steps"></a>次の手順

ワークロードをさらに最適化するためにリソース クラスを活用する方法の詳細については、次の記事を参照してください。
* [ワークロード管理用のリソース クラス](resource-classes-for-workload-management.md)
* [ワークロードの解析](analyze-your-workload.md)

