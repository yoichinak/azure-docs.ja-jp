---
title: Azure ネットワーク アーキテクチャ
description: この記事では、Microsoft Azure インフラストラクチャ ネットワークの一般的な説明を行います。
services: security
documentationcenter: na
author: TerryLanfear
manager: MBaldwin
editor: TomSh
ms.assetid: 61e95a87-39c5-48f5-aee6-6f90ddcd336e
ms.service: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 06/28/2018
ms.author: terrylan
ms.openlocfilehash: 5a0f0594a9ccb27a0f76a679e454e9a3ffe19a43
ms.sourcegitcommit: 9222063a6a44d4414720560a1265ee935c73f49e
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/03/2018
ms.locfileid: "39505390"
---
# <a name="azure-network-architecture"></a>Azure ネットワーク アーキテクチャ
Azure ネットワーク アーキテクチャでは、個別のハードウェア レイヤーで、業界標準の改訂版のコア モデル、配布モデル、アクセス モデルに準拠しています。 レイヤーには、次が含まれています。

- コア (データセンター ルーター)
- 配布 (アクセス ルーターと L2 アグリゲーション)。 分散レイヤーは、L3 のルーティングを L2 スイッチから分離します。
- アクセス (L2 ホストのスイッチ)

ネットワーク アーキテクチャは、L2 の 2 つのレベルのスイッチを備えています。 1 つ目のレイヤーはもう 1 つのレイヤーからのトラフィックを集計します。 2 つ目のレイヤーはループして冗長性を取り入れます。 これによって、より柔軟な VLAN フットプリントが得られ、ポートのスケーリングが改善されます。 アーキテクチャでは、L2 および L3 の区分を保持します。これにより、ネットワークの各レイヤーの区分でハードウェアを使用でき、一方のレイヤーが他方のレイヤーに影響に与えるリスクを最小限に抑えます。 トランクの使用により、L3 インフラストラクチャへの接続など、リソース共有が可能になります。

## <a name="network-configuration"></a>ネットワーク構成
データセンター内の Azure クラスターのネットワーク アーキテクチャは、以下のデバイスで構成されています。

- ルーター (データセンター、アクセス ルーター、およびボーダー リーフ ルーター)
- スイッチ (アグリゲーションとトップ オブ ラック スイッチ)
- Digi CM
- 電力配分装置

Azure には、2 つの個別のアーキテクチャがあります。 一部の既存の Azure のお客様と共有サービスは既定の LAN アーキテクチャ (DLA) 上に置かれ、新しいリージョンや仮想のお客様は、Quantum 10 (Q10) アーキテクチャ上に置かれます。 DLA アーキテクチャは、アクティブ/パッシブ アクセス ルーターとアクセス ルーターに適用されるセキュリティ アクセス制御リスト (ACL) を備えた、従来のツリー設計です。 Quantum 10 アーキテクチャはルーターのクロス/メッシュ設計です。この設計では、ACL はルーターには適用されません。 代わりに、Software Load Balancing (SLB) またはソフトウェア定義の VLAN 経由のルーティング下に適用されます。

次の図は、Azure クラスター内のネットワーク アーキテクチャの概要です。

![Azure ネットワークの図][1]

### <a name="quantum-10-devices"></a>Quantum 10 デバイス
Quantum 10 の設計では、クロス/メッシュ設計で複数のデバイスにわたって配置されているレイヤー 3 スイッチを操作します。 Q10 設計の利点として、容量の大規模化と、既存のネットワーク インフラストラクチャをスケーリングするための機能の向上が挙げられます。 設計では、ボーダー リーフ ルーター、スパイン スイッチ、トップ オブ ラック ルーターを採用し、フォールト トレランスを可能にする複数のルートにわたるクラスターにトラフィックを渡します。 ネットワーク アドレス変換などのセキュリティ サービスは、ハードウェア デバイスではなく、ソフトウェアの負荷分散によって処理されます。

### <a name="access-routers"></a>アクセス ルーター
配布/アクセスの L3 ルーター (AR) は、配布レイヤーとアクセス レイヤーに対する基本的なルーティング機能を実行します。 これらのデバイスはペアで配置され、サブネットの既定のゲートウェイになります。 各 AR ペアでは、容量に応じて複数の L2 アグリゲーション スイッチのペアをサポートできます。 最大数は、デバイスの容量とエラーになっているドメインに応じて、異なります。 通常の数は、1 つの AR ペアごとに 3 つの L2 アグリゲーション スイッチです。

### <a name="l2-aggregation-switches"></a>L2 アグリゲーション スイッチ  
これらのデバイスは、L2 トラフィックの集約ポイントとして機能します。 L2 ファブリックの配布レイヤーであり、大量のトラフィックを処理できます。 これらのデバイスはトラフィックを集約するため、802.1q 機能と、ポート アグリゲーションや 10GE などの高帯域幅のテクノロジを必要とします。

### <a name="l2-host-switches"></a>L2 ホストのスイッチ
ホストは、これらのスイッチに直接接続されます。 ラックマウント方式のスイッチ、またはシャーシの配置を利用できます。 802.1q 標準では、ネイティブ VLAN として 1 つの VLAN の指定が可能であり、VLAN を通常の (タグ付けされていない) イーサネット フレームとして扱います。 通常の状況下では、ネイティブ VLAN 上のフレームは転送され、タグ付けされない状態で 802.1q トランク ポートに受信されます。 この機能は、802.1q への移行と 802.1 q 非対応のデバイスとの互換性のために設計されました。 このアーキテクチャでは、ネットワーク インフラストラクチャのみがネイティブ VLAN を使用します。

このアーキテクチャでは、ネイティブ VLAN の選択で標準を指定します。 標準を指定することで、可能な場合は、AR デバイスがすべてのトランクに対する固有のネイティブ VLAN と L2Aggregation トランクへの L2Aggregation を確実に備えるようにします。 L2Aggregation から L2Host へのスイッチ トランクは、既定ではないネイティブ VLAN を備えます。

### <a name="link-aggregation-8023ad"></a>リンク アグリゲーション (802.3ad)
リンク アグリゲーションは、複数の個々のリンクを 1 つにまとめて、単一の論理リンクとして扱えるようにします。 操作デバッグを容易にするため、ポートチャネル インターフェイスの指定に使用する番号を標準化する必要があります。 ネットワークの残りの部分では、ポートチャネルの両端で同じ番号を使用します。

L2Agg から L2Host へのスイッチに指定された番号は、L2Agg 側で使用されるポートチャネル番号になります。 L2Host 側では番号の範囲がより限定されるため、標準では、1 および 2 の番号を L2Host 側で使用します。 これらによって、それぞれ "a" 側と "b" 側に向かうポートチャネルが参照されます。

### <a name="vlans"></a>VLAN
ネットワーク アーキテクチャでは VLAN を使用して、複数のサーバーを単一のブロードキャスト ドメインにグループ化します。 VLAN の番号は、1 から 4094 の番号が付けられた VLAN をサポートする 802.1q 標準に準拠しています。

### <a name="customer-vlans"></a>お客様の VLAN
お客様には、ソリューションの分離とアーキテクチャ上のニーズを満たすための、Azure portal 経由でデプロイできるさまざまな VLAN 実装オプションがあります。 これらのソリューションは、仮想マシンを通してデプロイします。 お客様の参照アーキテクチャの例については、「[Azure の参照アーキテクチャ](https://docs.microsoft.com/azure/architecture/reference-architectures/)」を参照してください。

### <a name="edge-architecture"></a>エッジ アーキテクチャ
Azure データ センターは、冗長性の高い、適切にプロビジョニングされたネットワーク インフラストラクチャに基づいて構築されています。 Microsoft では、"予備の 1 台" (N+1) 冗長またはそれ以上のアーキテクチャで Azure データ センター内にネットワークを実装しています。 データ センター内とデータセンター間での完全フェールオーバー機能は、ネットワークとサービスの可用性の保証に役立ちます。 外部的には、データセンターは、高帯域幅の専用ネットワーク回路によって提供されます。 この回路は、複数のピアリング ポイントで、1,200 を超えるインターネット サービス プロバイダーを使って、グローバルにプロパティを冗長接続します。 これは、ネットワーク全体での潜在的な上限の容量として 2,000 Gbps 以上を提供しています。

Azure ネットワークのエッジ レイヤーとアクセス レイヤーでルーターをフィルター処理すると、パケット レベルで適切に確立されたセキュリティが提供されます。 これは、未承認の Azure への接続試行を防止するのに役立ちます。 ルーターは、パケットの実際のコンテンツが、想定される形式でデータを含み、想定されるクライアント/サーバー通信のスキームに準拠することを保証するのに役立ちます。 Azure では、次のネットワークの分離とアクセス制御コンポーネントで構成される階層型アーキテクチャを実装しています。

- **エッジ ルーター。** これは、インターネットからアプリケーション環境を分離します。 エッジ ルーターは、スプーフィング対策のセキュリティ保護を提供し、ACL を使用してアクセスを制限するように設計されています。
- **配布 (アクセス) ルーター。** これは、Microsoft が承認した IP アドレスのみを許可し、スプーフィング対策と、ACL を使用して確立された接続を提供します。

### <a name="a10-ddos-mitigation-architecture"></a>A10 DDOS リスク軽減アーキテクチャ
サービス拒否攻撃 (DoS) は、オンライン サービスの信頼性に対する実際の脅威を継続的に提示します。 攻撃の対象がより明確に、より巧妙になったこと、また、Microsoft が提供するサービスが地理的により多様になったことから、これらの攻撃の影響を特定して最小化することが最優先になっています。 以下に、ネットワーク アーキテクチャの観点から、A10 DDOS リスク軽減システムがどのように実装されているかを詳しく説明します。

Azure では、データセンター ルーター (DCR) で、自動で検出と軽減策を提供する A10 ネットワーク デバイスを使用します。 A10 ソリューションでは、Azure Network Monitoring を使用してフロー パケットをサンプリングし、攻撃があるかどうかを判断します。 攻撃が検出されると、A10 デバイスはスクラブして攻撃を軽減します。 こうすることで初めて、クリーンなトラフィックが DCR から直接、Azure データ センターへ許可されます。 Microsoft では、A10 ソリューションを使用して Azure ネットワーク インフラストラクチャを保護しています。

A10 ソリューションの DDoS 保護には次が含まれます。

- UDP IPv4 および IPv6 のオーバーフロー防止
- ICMP IPv4 および IPv6 のオーバーフロー防止
- TCP IPv4 および IPv6 のオーバーフロー防止
- IPv4 および IPv6 に対する TCP SYN 攻撃の防止
- 攻撃のフラグメント化

> [!NOTE]
> Microsoft では、すべての Azure のお客様に対して、既定で DDoS 保護を提供しています。
>
>

## <a name="network-connection-rules"></a>ネットワーク接続規則
Azure では、未承認の Azure への接続試行を防止するために、パケット レベルでセキュリティを提供するエッジ ルーターをネットワーク上にデプロイします。 エッジ ルーターは、パケットの実際のコンテンツが、想定される形式でデータを含み、想定されるクライアント/サーバー通信のスキームに準拠することを保証します。

エッジ ルーターは、インターネットからアプリケーション環境を分離します。 これらのルーターは、スプーフィング対策のセキュリティ保護を提供し、ACL を使用してアクセスを制限するように設計されています。 Microsoft では、階層化された ACL アプローチを使用して、エッジ ルーターを通過してルーターにアクセスすることを許可されているネットワーク プロトコルに限定するように、エッジ ルーターを構成しています。

Microsoft では、ネットワーク デバイスをアクセスとエッジの位置に配置して、イングレス フィルターまたはエグレス フィルターが適用される境界ポイントとして機能するようにしています。

## <a name="next-steps"></a>次の手順
Microsoft が Azure インフラストラクチャのセキュリティ保護を支援するために行っていることの詳細については、以下を参照してください。

- [Azure の施設、建物、および物理上のセキュリティ](azure-physical-security.md)
- [Azure インフラストラクチャの可用性](azure-infrastructure-availability.md)
- [Azure 情報システムのコンポーネントと境界](azure-infrastructure-components.md)
- [Azure 実稼働環境のネットワーク](azure-production-network.md)
- [Azure SQL Database のセキュリティ機能](azure-infrastructure-sql.md)
- [Azure の実稼働環境の運用と管理](azure-infrastructure-operations.md)
- [Azure インフラストラクチャの監視](azure-infrastructure-monitoring.md)
- [Azure インフラストラクチャの整合性](azure-infrastructure-integrity.md)
- [Azure での顧客データの保護](azure-protection-of-customer-data.md)

<!--Image references-->
[1]: ./media/azure-infrastructure-network/network-arch.png
