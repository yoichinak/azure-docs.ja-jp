---
title: Azure AD アプリ プロキシのコネクタ グループを使用して別のネットワークや場所にアプリケーションを発行する | Microsoft Docs
description: Azure AD アプリケーション プロキシにおけるコネクタのグループの作成と管理の方法について説明します。
services: active-directory
documentationcenter: ''
author: barbkess
manager: mtillman
ms.service: active-directory
ms.component: app-mgmt
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: conceptual
ms.date: 01/31/2018
ms.author: barbkess
ms.reviewer: harshja
ms.custom: H1Hack27Feb2017; it-pro
ms.openlocfilehash: e149df09bf424d33fa9abdf8108b3b79534a8599
ms.sourcegitcommit: f86e5d5b6cb5157f7bde6f4308a332bfff73ca0f
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/31/2018
ms.locfileid: "39364975"
---
# <a name="publish-applications-on-separate-networks-and-locations-using-connector-groups"></a>コネクタ グループを使用して別のネットワークや場所にアプリケーションを発行する

Azure AD のアプリケーション プロキシは、ますます多くのシナリオやアプリケーションで利用されるようになっています。 そのため、Microsoft では、より多くのトポロジを有効にすることでアプリ プロキシの柔軟性をさらに高めました。 アプリケーション プロキシのコネクタ グループを作成して、特定のアプリケーションに対応する特定のコネクタを割り当てることができます。 この機能により、アプリケーション プロキシのデプロイをより詳細に制御し、多数の方法で最適化することができます。 

各アプリケーション プロキシ コネクタは、コネクタ グループに割り当てられます。 同じコネクタ グループに属するすべてのコネクタは、高可用性と負荷分散のために別個のユニットとして動作します。 すべてのコネクタは、コネクタ グループに属します。 グループを作成しない場合、すべてのコネクタが既定のグループに属することになります。 管理者は、Azure Portal で新しいグループを作成し、コネクタを割り当てることができます。 

すべてのアプリケーションは、コネクタ グループに割り当てられます。 グループを作成しない場合、すべてのアプリケーションが既定のグループに割り当てられます。 ただし、コネクタをグループに分けることで、特定のコネクタ グループと連携するように各アプリケーションを設定できます。 この場合、そのグループ内のコネクタのみが、要求に応じてアプリケーションに対応します。 この機能は、複数のアプリケーションが別々の場所でホストされている場合に便利です。 場所に基づいてコネクタ グループを作成できるので、アプリケーションは常に物理的に最も近くにあるコネクタによって対応されることになります。

>[!TIP] 
>大規模なアプリケーション プロキシをデプロイしている場合は、アプリケーションを既定のコネクタ グループに割り当てないでください。 そうすると、新しいコネクタは、アクティブなコネクタ グループに割り当てられるまではライブ トラフィックを受信しません。 この構成では、コネクタを既定のグループに戻すことでアイドル状態にすることもできるので、ユーザーに影響を与えずにメンテナンスを実行できます。

## <a name="prerequisites"></a>前提条件
コネクタをグループ化するには、 [複数のコネクタがインストールされている](application-proxy-enable.md)ことを確認する必要があります。 新しいコネクタをインストールすると、そのコネクタは自動的に **Default** コネクタ グループに追加されます。

## <a name="create-connector-groups"></a>コネクタ グループを作成する
次の手順を使用して、コネクタ グループを必要な数だけ作成します。 

1. [Azure Portal](https://portal.azure.com) にサインインします。
1. **[Azure Active Directory]** > **[エンタープライズ アプリケーション]** > **[アプリケーション プロキシ]** を選択します。
2. **[新しいコネクタ グループ]** を選択します。 [New Connector Group (新しいコネクタ グループ)] ブレードが表示されます。

   ![新しいコネクタ グループの選択](./media/application-proxy-connector-groups/new-group.png)

3. 新しいコネクタ グループに名前を付け、ドロップダウン メニューを使用して、このグループに含めるコネクタを選択します。
4. **[保存]** を選択します。

## <a name="assign-applications-to-your-connector-groups"></a>コネクタ グループにアプリケーションを割り当てる
アプリケーション プロキシを使って発行するアプリケーションごとに、次の手順を実行します。 アプリケーションを最初に発行するときにコネクタ グループに割り当てることができます。また、同じ手順を使って、必要に応じていつでも割り当てを変更することができます。   

1. ディレクトリの管理ダッシュボードで、**[Enterprise applications (エンタープライズ アプリケーション)]** > **[すべてのアプリケーション]**、コネクタ グループに割り当てるアプリケーション、**[アプリケーション プロキシ]** の順に選択します。
2. **[コネクタ グループ]** のドロップダウン メニューで、アプリケーションで使用するグループを選択します。
3. **[保存]** をクリックして変更を適用します。

## <a name="use-cases-for-connector-groups"></a>コネクタ グループのユース ケース 

コネクタ グループは、次のようなさまざまなシナリオで役立ちます。

### <a name="sites-with-multiple-interconnected-datacenters"></a>複数のデータセンターが相互接続されたサイト

複数のデータセンターを相互接続している組織は多数あります。 この場合、データセンター間リンクはコストがかかり、低速であるため、できるだけ多くのトラフィックをデータセンター内に留める必要があります。 各データセンターにコネクタをデプロイして、データセンター内にあるアプリケーションにのみサービスを提供できます。 この方法で、データセンター間のリンクを最小限に抑えて、ユーザーに完全に透過的なエクスペリエンスを提供できます。

### <a name="applications-installed-on-isolated-networks"></a>分離されたネットワークにインストールされたアプリケーション

メインの企業ネットワークの一部ではない分離されたネットワークでアプリケーションをホストすることができます。 コネクタ グループを使用して、分離されたネットワークに専用のコネクタをインストールし、そのネットワークに対してアプリケーションの分離も実現できます。 これは通常、サード パーティ ベンダーが組織の特定のアプリケーションを管理している場合に行います。 

コネクタ グループを使用すると、特定のアプリケーションのみを発行するネットワーク専用のコネクタをインストールできるため、アプリケーション管理をより簡単かつ安全にサード パーティ ベンダーに委託できます。

### <a name="applications-installed-on-iaas"></a>IaaS 上にインストールされたアプリケーション 

クラウド アクセスを実現するためにアプリケーションが IaaS 上にインストールされている場合。コネクタ グループは、すべてのアプリケーションへのアクセスをセキュリティで保護する共通サービスを提供します。 コネクタ グループによって、企業ネットワークに対する追加の依存関係が生じることも、アプリケーション エクスペリエンスが分断されることもありません。 各クラウド データセンターにコネクタをインストールし、そのネットワーク上にあるアプリケーションにのみサービスを提供できます。 複数のコネクタをインストールして、高可用性を実現できます。

独自の IaaS 上でホストされている仮想ネットワークに接続された複数の仮想マシンを保有する組織の例を見てみましょう。 従業員がこれらのアプリケーションを使用できるようにするために、これらのプライベート ネットワークは、サイト間 VPN を使用して企業ネットワークに接続されます。 これにより、オンプレミスの従業員に良好なエクスペリエンスが提供されます。 しかし、これはリモートの従業員にとっては必ずしも理想的な方法ではありません。次の図に示すように、アクセスをルーティングするための追加のオンプレミス インフラストラクチャが必要になるためです。

![Azure AD IaaS ネットワーク](./media/application-proxy-connector-groups/application-proxy-iaas-network.png)
  
Azure AD アプリケーション プロキシ コネクタ グループを使用すると、一般的なサービスですべてのアプリケーションへのアクセスを保護できます。企業ネットワークに対する依存関係がそれ以上生じることもありません。

![Azure AD IaaS の複数クラウド ベンダー](./media/application-proxy-connector-groups/application-proxy-multiple-cloud-vendors.png)

### <a name="multi-forest--different-connector-groups-for-each-forest"></a>マルチフォレスト - フォレストごとに異なるコネクタ グループ

アプリケーション プロキシをデプロイしているほとんどのお客様は、Kerberos の制約付き委任 (KCD) を実行してシングル サインオン (SSO) 機能を使用しています。 これを実現するには、ユーザーをアプリケーションに委任できるドメインにコネクタのマシンを参加させる必要があります。 KCD は、フォレスト間の機能をサポートしています。 しかし、企業の個々のマルチフォレスト環境の間に信頼関係がない場合、単一のコネクタをすべてのフォレストに使用することはできません。 

この場合、特定のコネクタをフォレスト単位でデプロイし、その特定のフォレストのユーザーに対応範囲が限定される、発行済みのアプリケーションに対応するように設定できます。 それぞれのコネクタ グループは異なるフォレストを表します。 エクスペリエンスのほとんどとテナントはすべてのフォレストで統一されますが、Azure AD グループを使用してユーザーをフォレストのアプリケーションに割り当てることができます。
 
### <a name="disaster-recovery-sites"></a>ディザスター リカバリーサイト

ディザスター リカバリー (DR) サイトに対しては、サイトの実装方法に応じて 2 つの異なるアプローチを使用できます。

* DR サイトが (メイン サイトとまったく同じで、同じネットワークおよび AD 設定が使用される) アクティブ/アクティブ モードで構築されている場合、メイン サイトと同じコネクタ グループの DR サイトにコネクタを作成できます。 これにより、Azure AD はフェールオーバーを検出できます。
* DR サイトがメイン サイトから切り離されている場合は、DR サイトに異なるコネクタ グループを作成し、1) バックアップ アプリケーションを用意するか、2) 必要に応じて既存のアプリケーションを DR コネクタ グループに手動で切り替えることができます。
 
### <a name="serve-multiple-companies-from-a-single-tenant"></a>単一のテナントから複数の企業にサービスを提供する

単一のサービス プロバイダーが複数の企業向けに Azure AD 関連サービスをデプロイして維持するモデルを実装するには、さまざまな方法があります。 コネクタ グループは、管理者がコネクタとアプリケーションを異なるグループに分けるのに役立ちます。 小規模な企業に適した 1 つの方法として、Azure AD テナントを 1 つ用意し、企業ごとに独自のドメイン名とネットワークを提供する方法があります。 これは、M&A のシナリオや、単一の IT 部門が規制または事業上の理由で複数の企業にサービスを提供する状況にも当てはまります。 

## <a name="sample-configurations"></a>サンプルの構成

実装できるいくつかの例には、次のコネクタ グループが含まれています。
 
### <a name="default-configuration--no-use-for-connector-groups"></a>既定の構成 – コネクタ グループを使用しない

コネクタ グループを使用しない場合、構成は次のようになります。

![Azure AD: コネクタ グループなし](./media/application-proxy-connector-groups/application-proxy-sample-config-1.png)
 
小規模なデプロイとテストにはこの構成で十分です。 また、この構成は、組織のネットワーク トポロジがフラットな場合にも効果的に動作します。
 
### <a name="default-configuration-and-an-isolated-network"></a>既定の構成と分離されたネットワーク

この構成は既定の構成を発展させたものです。この構成には、IaaS 仮想ネットワークなどの分離されたネットワークで実行される特定のアプリケーションがあります。 

![Azure AD: コネクタ グループなし](./media/application-proxy-connector-groups/application-proxy-sample-config-2.png)
 
### <a name="recommended-configuration--several-specific-groups-and-a-default-group-for-idle"></a>推奨構成 - 複数の特定のグループとアイドル コネクタ用の既定のグループ

大規模で複雑な組織に対しては、アプリケーションに対応しないグループを既定のコネクタ グループとして構成し、これをアイドル コネクタまたは新規にインストールされたコネクタ用に使用することをお勧めします。 すべてのアプリケーションへの対応は、カスタマイズされたコネクタ グループを通じて行われます。 これにより、上記の複雑なシナリオすべてに対応可能です。

2 つのデータセンター A と B を保有している企業の例を次に示します。各サイトへの対応は 2 つのコネクタによって行われています。 各サイトでは、それぞれ異なるアプリケーションが実行されています。 

![Azure AD: コネクタ グループなし](./media/application-proxy-connector-groups/application-proxy-sample-config-3.png)
 
## <a name="next-steps"></a>次の手順

* [Azure AD アプリケーション プロキシ コネクタについて](application-proxy-connectors.md)
* [シングル サインオンを有効にする](application-proxy-single-sign-on.md)


