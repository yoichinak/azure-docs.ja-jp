---
title: ギャラリー以外のアプリケーションのパスワード シングル サインオンを構成する場合の問題 | Microsoft Docs
description: ギャラリー以外の (Azure AD アプリケーション ギャラリーに表示されていない) カスタム アプリケーションのパスワード シングル サインオンを構成する場合に直面する一般的な問題についての説明
services: active-directory
documentationcenter: ''
author: barbkess
manager: mtillman
ms.assetid: ''
ms.service: active-directory
ms.component: app-mgmt
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: conceptual
ms.date: 07/11/2017
ms.author: barbkess
ms.openlocfilehash: 03cb425649326ca5313e177df29bfb18e55c14c1
ms.sourcegitcommit: f86e5d5b6cb5157f7bde6f4308a332bfff73ca0f
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/31/2018
ms.locfileid: "39364873"
---
# <a name="problem-configuring-password-single-sign-on-for-a-non-gallery-application"></a>ギャラリー以外のアプリケーションのパスワード シングル サインオンを構成する場合の問題

この記事では、ギャラリー以外のアプリケーションで**パスワード シングル サインオン**を構成するときに直面する一般的な問題について説明します。

## <a name="how-to-capture-sign-in-fields-for-an-application"></a>アプリケーションのサインイン フィールドをキャプチャする方法

サインイン フィールドのキャプチャは HTML 対応のサインイン ページだけでサポートされており、Flash やその他の HTML 非対応テクノロジを使用するページなどの**非標準サインイン ページではサポートされていません**。

カスタム アプリケーションのサインイン フィールドをキャプチャするには、次の 2 つの方法があります。

-   自動サインイン フィールド キャプチャ

-   手動サインイン フィールド キャプチャ

**自動サインイン フィールド キャプチャ**は、ほとんどの HTML 対応サインイン ページでうまく機能します (**ユーザー名とパスワードの入力フィールドで、よく知られた DIV ID** が使用されている場合)。 この方法では、ページの HTML を取り出して、特定の条件に一致する DIV ID を見つけた後、そのメタデータをこのアプリケーションのために保存して、後でそのアプリケーションに対してパスワードを再生します。

**手動サインイン フィールド キャプチャ**は、サインインに使用される入力フィールドに対してアプリケーション **ベンダーがラベル付けしていない**場合に使用できます。 手動サインイン フィールド キャプチャは、自動検出することができない**複数のフィールドをベンダーが表示**する場合にも使用できます。 Azure AD は、ページ上のどこにフィールドがあるかが指定されれば、サインイン ページにあるすべてのフィールドのデータを格納できます。

一般に、**自動サインイン フィールド キャプチャが機能しない場合は、手動オプションを試してください。**

### <a name="how-to-automatically-capture-sign-in-fields-for-an-application"></a>アプリケーションのサインイン フィールドを自動的にキャプチャする方法

**自動サインイン フィールド キャプチャ**を使用して、アプリケーションの**パスワード ベースのシングル サインオン**を構成するには、次の手順に従います。

1.  [**Azure Portal**](https://portal.azure.com/) を開き、**グローバル管理者**または**共同管理者**としてサインインします。

2.  左側のメイン ナビゲーション メニューの上部にある **[すべてのサービス]** をクリックして **[Azure Active Directory 拡張機能]** を開きます。

3.  フィルター検索ボックスに「**Azure Active Directory**」と入力し、**[Azure Active Directory]** 項目を選択します。

4.  Azure Active Directory の左側のナビゲーション メニューから **[エンタープライズ アプリケーション]** をクリックします。

5.  **[すべてのアプリケーション]** をクリックして、すべてのアプリケーションの一覧を表示します。

  * ここに表示したいアプリケーションが表示されない場合は、**[All Applications List (すべてのアプリケーション リスト)]** の上部にある **[フィルター]** コントロールを使用して、**[表示]** オプションを **[すべてのアプリケーション]** に設定します。

6.  シングル サインオンを構成するアプリケーションを選択します。

7.  アプリケーションが読み込まれたら、アプリケーションの左側のナビゲーション メニューから **[シングル サインオン]** をクリックします。

8.  **[パスワード ベースのサインオン]** モードを選択します。

9.  **サインオン URL** を入力します。この URL は、ユーザーがサインインのためにユーザー名とパスワードを入力する場所です。 **指定する URL にサインイン フィールドが表示されていることを確認します**。

10. **[保存]** ボタンをクリックします。

11. これを行うと、その URL がユーザー名とパスワードの入力ボックス用に自動的に取得され、Azure AD でアクセス パネル ブラウザー拡張機能を使用してそのアプリケーションにパスワードを安全に送信できるようになります。

## <a name="how-to-manually-capture-sign-in-fields-for-an-application"></a>アプリケーションのサインイン フィールドを手動でキャプチャする方法

サインイン フィールドを手動でキャプチャするには、まずアクセス パネル ブラウザー拡張機能がインストールされ、**InPrivate、Incognito、または Private モードでは実行されていない**状態にする必要があります。 ブラウザー拡張機能をインストールするには、「[アクセス パネルのブラウザー拡張機能をインストールする方法](#i-cannot-manually-detect-sign-in-fields-for-my-application)」セクションの手順に従います。

**手動サインイン フィールド キャプチャ**を使用して、アプリケーションの**パスワードベースのシングル サインオン**を構成するには、次の手順に従います。

1.  [**Azure Portal**](https://portal.azure.com/) を開き、**グローバル管理者**または**共同管理者**としてサインインします。

2.  左側のメイン ナビゲーション メニューの上部にある **[すべてのサービス]** をクリックして **[Azure Active Directory 拡張機能]** を開きます。

3.  フィルター検索ボックスに「**Azure Active Directory**」と入力し、**[Azure Active Directory]** 項目を選択します。

4.  Azure Active Directory の左側のナビゲーション メニューから **[エンタープライズ アプリケーション]** をクリックします。

5.  **[すべてのアプリケーション]** をクリックして、すべてのアプリケーションの一覧を表示します。

   * ここに表示したいアプリケーションが表示されない場合は、**[All Applications List (すべてのアプリケーション リスト)]** の上部にある **[フィルター]** コントロールを使用して、**[表示]** オプションを **[すべてのアプリケーション]** に設定します。

6.  シングル サインオンを構成するアプリケーションを選択します。

7.  アプリケーションが読み込まれたら、アプリケーションの左側のナビゲーション メニューから **[シングル サインオン]** をクリックします。

8.  **[パスワード ベースのサインオン]** モードを選択します。

9.  **サインオン URL** を入力します。この URL は、ユーザーがサインインのためにユーザー名とパスワードを入力する場所です。 **指定する URL にサインイン フィールドが表示されていることを確認します**。

10. **[保存]** ボタンをクリックします。

11. これを行うと、その URL がユーザー名とパスワードの入力ボックス用に自動的に取得され、Azure AD でアクセス パネル ブラウザー拡張機能を使用してそのアプリケーションにパスワードを安全に送信できるようになります。 これが失敗する場合は、手順 12. に進むことによって、**手動サインイン フィールド キャプチャを使用するようにサインイン モードを変更する**ことができます。

12. **[&lt;appname&gt; パスワード シングル サインオン設定の構成]** をクリックします。

13. **[サインイン フィールドの手動検出]** 構成オプションをオンにします。

14. **[OK]** をクリックします。

15. **[Save]** をクリックします。

16. アクセス パネルを使用するには、画面上の指示に従います。

## <a name="i-see-a-we-couldnt-find-any-sign-in-fields-at-that-url-error"></a>"その URL でサインイン フィールドが見つかりませんでした" というエラーが表示される

サインイン フィールドの自動検出が失敗した場合に、このエラーが表示されます。 この問題を解決するには、「[アプリケーションのサインイン フィールドを手動でキャプチャする方法](#how-to-manually-capture-sign-in-fields-for-an-application)」セクションの手順に従って、手動サインイン フィールド検出を試してみてください。

## <a name="i-see-an-unable-to-save-single-sign-on-configuration-error"></a>"シングル サインオンの構成を保存できません" というエラーが表示される

まれに、シングル サインオンの構成の更新が失敗することがあります。 この問題を解決するには、シングル サインオン構成をもう一度保存してみてください。

失敗が続く場合は、サポート ケースを開いて、「[ポータルの通知の詳細を確認する方法](#i-cannot-manually-detect-sign-in-fields-for-my-application)」と「[通知の詳細をサポート エンジニアに送信して支援を受ける方法](#how-to-get-help-by-sending-notification-details-to-a-support-engineer)」のセクションで収集した情報を提供してください。

## <a name="i-cannot-manually-detect-sign-in-fields-for-my-application"></a>アプリケーションのサインイン フィールドを手動で検出できない

手動検出がうまくできない場合には、次のような動作が見られます。

-   手動キャプチャ プロセスは機能しているように見えるが、キャプチャされたフィールドが正しくない

-   キャプチャ プロセスを実行しているときに、正しいフィールドが強調表示されない

-   キャプチャ プロセスで期待どおりにアプリケーションのログイン ページに移動するが、何も起こらない

-   手動キャプチャは機能しているように見えるが、ユーザーがアクセス パネルからアプリケーションに移動しても SSO が行われない

これらの問題が発生した場合は、以下の確認を行います。

-   「[アクセス パネルのブラウザー拡張機能をインストールする方法](#how-to-install-the-access-panel-browser-extension)」セクションの手順に従って、アクセス パネルのブラウザー拡張機能の最新バージョンが**インストール**され、**有効化**されていることを確認してください。

-   ブラウザーが **Incognito、InPrivate、または Private モード**であるときにキャプチャ プロセスを試みていないことを確認します。 アクセス パネルの拡張機能は、これらのモードではサポートされていません。

-   ユーザーが **Incognito、InPrivate、または Private モード**でアクセス パネルからアプリケーションにサインインしようとしていないことを確認します。 アクセス パネルの拡張機能は、これらのモードではサポートされていません。

-   手動キャプチャ プロセスをもう一度実行してみて、正しいフィールドに赤いマーカーが表示されていることを確認してください。

-   手動キャプチャ プロセスが停止しているように見えるか、サインイン ページで何も起きない (上の 3 つ目のケース) 場合は、手動キャプチャ プロセスを再度試します。 ただし、今回はプロセスを完了した後で **F12** キーを押して、ブラウザーの開発者コンソールを開きます。 **コンソール**が開かれたら、「**window.location="&lt;アプリの構成時に指定したサインイン URL を入力&gt;"**」と入力し、**Enter** キーを押します。 これにより、キャプチャ プロセスを終了し、キャプチャされたフィールドを格納するページ リダイレクトが強制的に実行されます。

これらのいずれの方法でも解決しなかった場合は、サポートが支援できます。 サポート ケースを開き、何をしようとしたかについての詳細と、「[ポータルの通知の詳細を確認する方法](#i-cannot-manually-detect-sign-in-fields-for-my-application)」と「[通知の詳細をサポート エンジニアに送信して支援を受ける方法](#how-to-get-help-by-sending-notification-details-to-a-support-engineer)」のセクションで収集した情報 (該当する場合) をお知らせください。

## <a name="how-to-install-the-access-panel-browser-extension"></a>アクセス パネルのブラウザー拡張機能をインストールする方法

アクセス パネルのブラウザー拡張機能をインストールするには、次の手順に従います。

1.  サポートされている任意のブラウザーで、[アクセス パネル](https://myapps.microsoft.com)を開き、Azure AD の**ユーザー**としてサインインします。

2.  アクセス パネルで、**パスワード SSO アプリケーション**をクリックします。

3.  ソフトウェアのインストールを確認するプロンプトで、**[今すぐインストール]** を選択します。

4.  お使いのブラウザーに基づいて、ダウンロード リンクが表示されます。 お使いのブラウザーに拡張機能を**追加**します。

5.  お使いのブラウザーに確認メッセージが表示されたら、拡張機能を **[有効にする]** または **[許可する]** のいずれかを選択します。

6.  インストールが完了したら、ブラウザー セッションを**再起動**します。

7.  アクセス パネルにサインインし、パスワード SSO アプリケーションを**起動**できるかどうかを確認します。

以下のダイレクト リンクから、Chrome と Firefox 対応の拡張機能をダウンロードすることもできます。

-   [Chrome アクセス パネル拡張機能](https://chrome.google.com/webstore/detail/access-panel-extension/ggjhpefgjjfobnfoldnjipclpcfbgbhl)

-   [Firefox アクセス パネル拡張機能](https://addons.mozilla.org/firefox/addon/access-panel-extension/)

## <a name="how-to-see-the-details-of-a-portal-notification"></a>ポータルの通知の詳細を確認する方法

ポータルの通知の詳細を確認するには、次の手順に従います。

1.  Azure Portal の右上隅にある **[通知]** アイコン (ベル) をクリックします。

2.  **エラー**状態のいずれかの通知 (横に赤い (!) が表示されているもの) を選択します。

  >!注] **成功**または**進行中**状態の通知をクリックすることはできません。
  >
  >

3.  **[通知の詳細]** ウィンドウが開きます。

4.  この情報を使用して、問題に関する詳細を把握します。

5.  依然としてサポートが必要な場合は、この情報をサポート エンジニアまたは製品グループと共有して、問題の解決を図ることもできます。

6.  **[エラーのコピー]** ボックスの右にある **[コピー]** **アイコン**をクリックしてすべての通知の詳細をコピーし、サポート エンジニアまたは製品グループの技術者と共有することができます。

## <a name="how-to-get-help-by-sending-notification-details-to-a-support-engineer"></a>通知の詳細をサポート エンジニアに送信して支援を受ける方法

支援が必要な場合は、**以下に記載された詳細をすべて**サポート エンジニアと共有することが重要です。これにより、すばやい解決が実現します。 **スクリーンショットを取る**か、または **[エラーのコピー]** テキスト ボックスの右にある **[エラーのコピー] アイコン**をクリックすることができます。

## <a name="notification-details-explained"></a>通知の詳細についての説明

各通知項目についての詳細な説明とそれぞれの例を以下に示します。

### <a name="essential-notification-items"></a>重要な通知項目

-   **タイトル** – 通知のわかりやすいタイトル

    -   例 – **アプリケーション プロキシの設定**

-   **説明** – 操作の結果として発生した内容についての説明

    -   例 – **入力された内部 URL は、既に別のアプリケーションで使用されています**

-   **通知 ID** – 通知の一意の ID

    -   例 – **clientNotification-2adbfc06-2073-4678-a69f-7eb78d96b068**

-   **クライアント要求 ID** – ブラウザーで作成された特定の要求 ID

    -   例 – **302fd775-3329-4670-a9f3-bea37004f0bc**

-   **タイム スタンプ UTC** – 通知発生時のタイムスタンプ (UTC)

    -   例 – **2017-03-23T19:50:43.7583681Z**

-   **内部トランザクション ID** – システムでエラーを検索するために使用される内部 ID

    -   例 – **71a2f329-ca29-402f-aa72-bc00a7aca603**

-   **UPN** – 操作を実行したユーザー

    -   例 – **tperkins@f128.info**

-   **テナント ID** – 操作を実行したユーザーがメンバーであったテナントの一意の ID

    -   例 – **7918d4b5-0442-4a97-be2d-36f9f9962ece**

-   **ユーザー オブジェクト ID** – 操作を実行したユーザーの一意の ID

    -   例 – **17f84be4-51f8-483a-b533-383791227a99**

### <a name="detailed-notification-items"></a>詳細な通知項目

-   **表示名** – **(空白でも可)** エラーの詳細な表示名

    -   例 *– **アプリケーション プロキシの設定**

-   **状態** – 通知の特定の状態

    -   例 *– **失敗**

-   **オブジェクト ID** – **(空でも可)** 実行された操作の対象であるオブジェクト ID

    -   例 – **8e08161d-f2fd-40ad-a34a-a9632d6bb599**

-   **詳細** – 操作の結果として発生した内容についての詳細な説明

    -   例 - **内部 URL "http://bing.com/" は既に使用中のため無効です**

-   **エラーのコピー** - **[エラーのコピー]** ボックスの右にある**コピー アイコン**をクリックしてすべての通知の詳細をコピーし、サポート エンジニアまたは製品グループの技術者と共有します

    -   例 – ```{"errorCode":"InternalUrl\_Duplicate","localizedErrorDetails":{"errorDetail":"Internal url 'http://google.com/' is invalid since it is already in use"},"operationResults":\[{"objectId":null,"displayName":null,"status":0,"details":"Internal url 'http://bing.com/' is invalid since it is already in use"}\],"timeStampUtc":"2017-03-23T19:50:26.465743Z","clientRequestId":"302fd775-3329-4670-a9f3-bea37004f0bb","internalTransactionId":"ea5b5475-03b9-4f08-8e95-bbb11289ab65","upn":"tperkins@f128.info","tenantId":"7918d4b5-0442-4a97-be2d-36f9f9962ece","userObjectId":"17f84be4-51f8-483a-b533-383791227a99"}```

## <a name="next-steps"></a>次の手順
[アプリケーション プロキシを使用してアプリにシングル サインオンを提供](manage-apps/application-proxy-configure-single-sign-on-with-kcd.md)

