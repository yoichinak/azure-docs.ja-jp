---
title: BLOB の Azure ホット、クール、およびアーカイブ ストレージ | Microsoft Docs
description: Azure Storage アカウントのホット ストレージ、クール ストレージ、アーカイブ ストレージ。
services: storage
author: kuhussai
ms.service: storage
ms.topic: article
ms.date: 12/11/2017
ms.author: kuhussai
ms.component: blobs
ms.openlocfilehash: b3279006d1ff947b76dd8fbba1438972e5f3ad8b
ms.sourcegitcommit: 4de6a8671c445fae31f760385710f17d504228f8
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/08/2018
ms.locfileid: "39630964"
---
# <a name="azure-blob-storage-hot-cool-and-archive-storage-tiers"></a>Azure Blob Storage: ホット、クール、およびアーカイブ ストレージ層

## <a name="overview"></a>概要

Azure Storage では、BLOB オブジェクト ストレージ用に 3 つのストレージ層が提供されています。そのため、使い方しだいで、コスト効率の高い方法でデータを格納することができます。 Azure **ホット ストレージ層**は、頻繁にアクセスされるデータの格納に適しています。 Azure **クール ストレージ層**は、アクセスされる頻度は低いものの、少なくとも 30 日以上保管されるデータの格納に適しています。 Azure **アーカイブ ストレージ層**は、ほとんどアクセスされず、少なくとも 180 日以上保管され、待ち時間の要件が柔軟 (数時間単位) であるデータの格納に適しています。 アーカイブ ストレージ層は、BLOB レベルのみで使用することができ、ストレージ アカウント レベルで使用することはできません。 クール ストレージ層に格納されるデータについては、可用性が若干低くても許容できますが、高い持続性は必要で、アクセスにかかる時間とスループット特性もホット データと同程度である必要があります。 ホット データと比較して可用性の SLA が若干低く、アクセス コストが高めのクール データは、ストレージ コストが低ければ許容できます。 アーカイブ ストレージはオフラインであり、ストレージ コストは最も低くなりますが、アクセス コストが最も高くなります。 アカウント レベルで設定できるのはホット ストレージ層とクール ストレージ層だけです (アーカイブは不可)。 3 つの層は、いずれもオブジェクト レベルで設定できます。

最近では、クラウドに格納されるデータが急激に増加しています。 ストレージのニーズが拡大する中でコストを管理するには、アクセスの頻度や予定保有期間などの属性に基づいてデータを整理し、コストを最適化する方法が効果的です。 クラウドに格納されるデータは、有効期間を通じてどのように生成、処理、アクセスされるかという点で異なる場合があります。 有効期間を通じて活発にアクセスおよび変更されるデータもあれば、 有効期間の初期に頻繁にアクセスされ、古くなるにつれて大幅にアクセスが減るデータもあります。 また、クラウド内でアイドル状態のままとなり、格納されてからはほとんどアクセスされないデータもあります。

各データ アクセス シナリオは、特定のアクセス パターン用に最適化された異なるストレージ層の利点を利用しています。 Azure Blob Storage は、ホット、クール、およびアーカイブの各ストレージ層によって、分化されたストレージ層のニーズに異なる価格モデルで対応しています。

## <a name="storage-accounts-that-support-tiering"></a>階層制御をサポートするストレージ アカウント

オブジェクト ストレージ データの階層制御は、BLOB ストレージ アカウントと General Purpose v2 (GPv2) アカウントのホット、クール、またはアーカイブに対してのみ可能です。 General Purpose v1 (GPv1) アカウントは階層制御をサポートしていません。 ただし既存の GPv1 アカウントまたは BLOB ストレージ アカウントは、Azure Portal からの簡単なワンクリックのプロセスで、すぐに GPv2 アカウントに変換できます。 GPv2 では、BLOB、ファイル、キューに関して新しい料金体系が用意されているほか、各種の新しいストレージ機能が利用できるようになっています。 しかもゆくゆくは、いくつかの新しい機能と料金体系が GPv2 アカウントでしか提供されなくなります。 そこで、お客様には GPv2 アカウントの使用を評価していただきたいのですが、GPv2 アカウントを使用する前に必ず、すべてのサービスの料金をよくご確認ください。一部のワークロードは GPv1 よりも費用負担が大きい可能性があります。 詳細については、「[Azure storage account options (Azure Storage アカウントのオプション)](../common/storage-account-options.md?toc=%2fazure%2fstorage%2fblobs%2ftoc.json)」を参照してください。

BLOB ストレージ アカウントと GPv2 アカウントには、アカウント レベルで**アクセス層**属性が公開されていて、オブジェクト レベルで設定された階層を持たないストレージ アカウントの BLOB については、既定のストレージ層をホットまたはクールとして指定することができます。 オブジェクト レベルで階層が設定されているオブジェクトについては、アカウントの階層は適用されません。 アーカイブ層は、オブジェクト レベルでのみ適用することができます。 これらのストレージ層はいつでも切り替えることができます。

## <a name="hot-access-tier"></a>ホット アクセス層

ホット ストレージは、クール ストレージとアーカイブ ストレージに比べてストレージ コストが高くなるものの、アクセス コストが最も低くなります。 ホット ストレージ層の使用シナリオの例には、次のようなものがあります。

* 活発に使用されたり、頻繁にアクセス (読み取りまたは書き込み) されると予想されるデータ。
* 処理段階にあり、最終的にはクール ストレージ層に移行されるデータ。

## <a name="cool-access-tier"></a>クール アクセス層

クール ストレージ層は、ホット ストレージに比べてストレージ コストが低くなり、アクセス コストが高くなります。 この層は、少なくとも 30 日以上クール層で保持されるデータを対象としています。 クール ストレージ層の使用シナリオの例には、次のようなものがあります。

* 短期的なバックアップおよびディザスター リカバリーのデータセット。
* 既に頻繁に参照されなくなっているものの、アクセスされたときにはすぐに利用できることが期待されている、古いメディア コンテンツ。
* 今後処理するためにさらにデータが収集されている場合に、コスト効率の高い方法で格納する必要がある、大規模なデータ セット  ("*たとえば*"、長期保存する科学データや、製造施設からの未加工のテレメトリ データ)。

## <a name="archive-access-tier"></a>アーカイブ アクセス層

アーカイブ ストレージは、ストレージ コストが最も低く、ホット ストレージとクール ストレージに比べてデータ取得コストが高くなります。 この層は、数時間の取得待ち時間が許容され、少なくとも 180 日以上アーカイブ層に保持されるデータを対象としています。

BLOB はアーカイブ ストレージにありますが、オフラインになっているため、読み取り (オンラインであり利用可能なメタデータを除く)、コピー、上書き、または変更を行うことはできません。 また、アーカイブ ストレージ内の BLOB のスナップショットを作成することもできません。 ただし、既存の操作を使用して、BLOB プロパティ/メタデータの削除、一覧表示、取得を行ったり、BLOB の層を変更したりすることはできます。

アーカイブ ストレージ層の使用シナリオの例には、次のようなものがあります。

* 長期バックアップ、セカンダリ バックアップ、アーカイブ データセット
* 最終的に使用可能な形式に処理した後も保持する必要がある、元の (未加工の) データ  ("*たとえば*"、他の形式にコード変換した後の未加工のメディア ファイル)。
* 長期間格納しておく必要があり、ほとんどアクセスされることがない、コンプライアンスおよびアーカイブ データ  ("*たとえば*"、監視カメラ映像、医療機関の古い X 線/MRI 画像、金融サービスの顧客電話の音声録音や会話記録)。

### <a name="blob-rehydration"></a>BLOB のリハイドレート
アーカイブ ストレージ内のデータを読み取るには、まず、BLOB の層をホットまたはクールに変更する必要があります。 このプロセスはリハイドレートと呼ばれ、完了までに最大で 15 時間かかることがあります。 最適なパフォーマンスを得るために、大きな BLOB サイズを強くお勧めします。 複数の小さな BLOB を同時にリハイドレートすると、余分に時間がかかる場合があります。

リハイドレート中に、層が変更されたかどうかを確認するために BLOB の**アーカイブ ステータス** プロパティをチェックすることができます。 ステータスは、変更先の層に応じて "rehydrate-pending-to-hot" または "rehydrate-pending-to-cool" になります。 完了すると、アーカイブ ステータス プロパティが削除され、BLOB の**アクセス層**プロパティに新しい階層としてホット層またはクール層が反映されます。  

## <a name="blob-level-tiering"></a>BLOB レベルの階層制御

BLOB レベルの階層制御では、[Set Blob Tier](/rest/api/storageservices/set-blob-tier) と呼ばれる 1 つの操作を使用して、オブジェクト レベルでデータの層を変更できます。 使用パターンの変化に応じて、アカウント間でデータを移動することなく、BLOB のアクセス層をホット、クール、またはアーカイブに簡単に変更することができます。 BLOB がアーカイブからリハイドレートされている場合は完了までに数時間がかかることもありますが、その場合を除くすべての層変更は直ちに行われます。 BLOB 層が最後に変更された時間は、BLOB の**アクセス層変更時間**プロパティを介して公開されます。 BLOB がアーカイブ層にある場合、BLOB は上書きされない可能性があります。したがって、このシナリオでは、同じ BLOB をアップロードすることができません。 ホット層とクール層にある BLOB は上書きすることができます。この場合、新しい BLOB は、上書きされた古い BLOB の層を継承します。

3 つすべてのストレージ層内の BLOB は、同じアカウント内で共存できます。 層が明示的に割り当てられていない BLOB では、アカウントのアクセス層の設定から層が推定されます。 アクセス層がアカウントから推定された場合、BLOB の**アクセス層の推定**プロパティが "true" に設定され、BLOB の**アクセス層**プロパティがアカウントの階層に一致します。 Azure Portal では、アクセス層の推定プロパティが BLOB アクセス層と共に表示されます (たとえば、"ホット (推定)" または "クール (推定)")。

> [!NOTE]
> アーカイブ ストレージと BLOB レベルの階層制御では、ブロック BLOB のみがサポートされます。 また、スナップショットがあるブロック BLOB の層を変更することもできません。

### <a name="blob-lifecycle-management"></a>BLOB のライフサイクル管理
Blob Storage のライフサイクル管理 (プレビュー) には優れたルールベースのポリシーが用意されており、これを使用して、最適なアクセス層にデータを移行し、ライフサイクルの最後にデータを期限切れにすることができます。 詳細については、「[Azure Blob Storage のライフサイクルの管理](https://docs.microsoft.com/en-us/azure/storage/common/storage-lifecycle-managment-concepts)」を参照してください。  

### <a name="blob-level-tiering-billing"></a>BLOB レベルの階層制御の課金

BLOB をよりクールな層 (ホットからクール、ホットからアーカイブ、またはクールからアーカイブ) に移動するとき、この操作は移動先の層への書き込みとして課金され、移動先の層の書き込み操作 (10,000 件単位) およびデータ書き込み (GB 単位) の料金が適用されます。 BLOB をよりホットな層 (アーカイブからクール、アーカイブからホット、またはクールからホット) に移動するとき、この操作は移動元の層からの読み取りとして課金され、移動元の層の読み取り操作 (10,000 件単位) およびデータ取得 (GB 単位) の料金が適用されます。

アカウントの階層をホットからクールに切り替えた場合、階層が設定されていない全 BLOB に関して書き込み操作 (10,000 件単位) の料金が適用されます。この料金が適用されるのは GPv2 アカウントのみです。 BLOB ストレージ アカウントでは、この点に関しての料金は発生しません。 BLOB ストレージ アカウントまたは GPv2 アカウントをクールからホットに切り替えた場合は、読み取り操作 (10,000 件単位) とデータ取得 (GB 単位) の両方の料金が発生します。 クール層またはアーカイブ層から移動された BLOB については、早期削除料金も適用される場合があります。

### <a name="cool-and-archive-early-deletion"></a>クールおよびアーカイブの早期削除

GB 単位の月額料金に加え、クール層 (GPv2 アカウントのみ) に移動された BLOB は 30 日のクール早期削除期間の対象となり、またアーカイブ層に移動された BLOB は 180 日のアーカイブ早期削除期間の対象となります。 この料金は日割り計算されます。 たとえば BLOB をアーカイブに移動し、45 日後に削除するかホット層に移動した場合、その BLOB のアーカイブへの保存について、135 (180 - 45) 日分に相当する早期削除料金が適用されます。

## <a name="comparison-of-the-storage-tiers"></a>ストレージ層の比較

次の表は、ホット ストレージ層、クール ストレージ層、アーカイブ ストレージ層の比較を示しています。

| | **ホット ストレージ層** | **クール ストレージ層** | **アーカイブ ストレージ層**
| ---- | ----- | ----- | ----- |
| **可用性** | 99.9% | 99% | 該当なし |
| **可用性** <br> **(RA-GRS 読み取り)**| 99.99% | 99.9% | 該当なし |
| **利用料金** | より高いストレージ コスト、より低いアクセスおよびトランザクション コスト | より低いストレージ コスト、より高いアクセスおよびトランザクション コスト | 最も低いストレージ コスト、最も高いアクセスおよびトランザクション コスト |
| **最小オブジェクト サイズ** | 該当なし | 該当なし | 該当なし |
| **最小ストレージ存続期間** | 該当なし | 30 日 (GPv2 のみ) | 180 日
| **待機時間** <br> **(1 バイト目にかかる時間)** | ミリ秒 | ミリ秒 | 15 時間未満
| **スケーラビリティとパフォーマンスのターゲット** | 汎用ストレージ アカウントと同じ | 汎用ストレージ アカウントと同じ | 汎用ストレージ アカウントと同じ |

> [!NOTE]
> BLOB ストレージ アカウントは、汎用ストレージ アカウントと同じパフォーマンスとスケーラビリティ ターゲットをサポートしています。 詳細については、「 [Azure Storage のスケーラビリティおよびパフォーマンスのターゲット](../common/storage-scalability-targets.md?toc=%2fazure%2fstorage%2fblobs%2ftoc.json) 」を参照してください。

## <a name="quickstart-scenarios"></a>クイックスタート シナリオ

このセクションでは、Azure Portal を使用して、次のシナリオについて説明します。

* GPv2 または BLOB ストレージ アカウントの既定のアクセス層を変更する方法。
* GPv2 または BLOB ストレージ アカウントの BLOB のアクセス層を変更する方法。

### <a name="change-the-default-account-access-tier-of-a-gpv2-or-blob-storage-account"></a>GPv2 または Blob Storage アカウントの既定のアクセス層を変更する

1. [Azure Portal](https://portal.azure.com) にサインインします。

2. ストレージ アカウントに移動するには、[すべてのリソース] を選択し、ストレージ アカウントを選択します。

3. [設定] ブレードで **[構成]** をクリックし、アカウント構成を表示または変更します。

4. ニーズに応じた適切なストレージ層を選択します。**[アクセス レベル]** を **[クール]** と **[ホット]** のいずれかに設定します。

5. ブレードの上部にある [保存] をクリックします。

### <a name="change-the-tier-of-a-blob-in-a-gpv2-or-blob-storage-account"></a>GPv2 または BLOB ストレージ アカウントの BLOB のアクセス層を変更する

1. [Azure Portal](https://portal.azure.com) にサインインします。

2. ストレージ アカウントの BLOB に移動するには、[すべてのリソース]、ストレージ アカウント、コンテナー、BLOB を順に選択します。

3. BLOB のプロパティ ブレードで、**[アクセス レベル]** ドロップダウン メニューをクリックし、**[ホット]**、**[クール]**、または **[アーカイブ]** ストレージ層を選択します。

5. ブレードの上部にある [保存] をクリックします。

## <a name="faq"></a>FAQ

**データを階層制御する場合、BLOB ストレージまたは GPv2 アカウントを使う必要があるのでしょうか。**

階層制御には BLOB ストレージ アカウントではなく GPv2 の使用をお勧めします。 GPv2 は、BLOB ストレージ アカウントで利用できるすべての機能をサポートしており、それ以外にもさまざまな機能を利用できます。 BLOB ストレージと GPv2 の料金体系はほぼ同じですが、いくつかの新機能と値下げの対象は GPv2 アカウントに限られています。 GPv1 アカウントでは、階層制御がサポートされません。

GPv1 アカウントと GPv2 アカウントとでは料金体系が異なります。GPv2 アカウントをご使用になる前に、両者を慎重に比較して評価してください。 既存の BLOB ストレージ アカウントまたは GPv1 アカウントは、簡単なワンクリックのプロセスで GPv2 に変換することができます。 詳細については、「[Azure storage account options (Azure Storage アカウントのオプション)](../common/storage-account-options.md?toc=%2fazure%2fstorage%2fblobs%2ftoc.json)」を参照してください。

**同じアカウントの 3 つすべて (ホット、クール、アーカイブ) のストレージ層にオブジェクトを格納することはできますか。**

はい。 アカウント レベルで設定された**アクセス層**属性は、明示的に層が設定されていない、そのアカウント内のすべてのオブジェクトに適用される既定の層です。 ただし、BLOB レベルの階層制御では、アカウントで設定されているアクセス層に関係なく、オブジェクト レベルでアクセス層を設定できます。 3 つのストレージ層 (ホット、クール、またはアーカイブ) のいずれの BLOB も同じアカウント内に存在することができます。

**Blob または GPv2 ストレージ アカウントの既定のストレージ層を変更することはできますか。**

はい。ストレージ アカウントの**アクセス層**属性を設定して、既定のストレージ層を変更することができます。 ストレージ層の変更は、アカウントに格納されている、層が明示的に設定されていないすべてのオブジェクトに適用されます。 ストレージ層をホットからクールに切り替えた場合、GPv2 アカウントについてのみ、階層が設定されていないすべての BLOB に関して、書き込み操作 (10,000 件単位) の料金が発生します。クールからホットへの切り替えでは、BLOB ストレージ アカウントと GPv2 アカウントのすべての BLOB に関して、読み取り操作 (10,000 件単位) とデータ取得 (GB 単位) の両方の料金が発生します。

**既定のアカウント アクセス層をアーカイブに設定することはできますか。**

いいえ。 既定のアカウント アクセス層として設定できるのは、ホット ストレージ層とクール ストレージ層だけです。 アーカイブは、オブジェクト レベルでのみ設定することができます。

**ホット、クール、アーカイブのストレージ層は、どのリージョンで利用できるのですか。**

ホット ストレージ層とクール ストレージ層は、BLOB レベルの階層制御と共に、すべてのリージョンでご利用いただけます。 アーカイブ ストレージは、初めは提供されるリージョンが限定されます。 詳細なリストについては、[Azure のリージョン別の利用可能な製品](https://azure.microsoft.com/regions/services/)に関するページを参照してください。

**クール ストレージ層内の BLOB の動作は、ホット ストレージ層内の BLOB とは異なりますか。**

ホット ストレージ層内の BLOB の待ち時間は、GPv1、GPv2、BLOB ストレージ アカウントの BLOB と同じになります。 クール ストレージ層内の BLOB の待ち時間は、GPv1、GPv2、BLOB ストレージ アカウントの BLOB と類似しています (ミリ秒)。 アーカイブ ストレージ層の BLOB の待ち時間は、GPv1、GPv2、BLOB ストレージ アカウントのいずれにおいても数時間に及びます。

クール ストレージ層内の BLOB は、ホット ストレージ層に格納された BLOB よりも可用性サービス レベル (SLA) が若干低くなります。 詳細については、「 [Storage の SLA](https://azure.microsoft.com/support/legal/sla/storage/v1_2/)」を参照してください。

**ホット、クール、アーカイブの各層間で操作は同じですか。**

はい。 ホットとクールとの間では、すべての操作に 100% の一貫性があります。 BLOB のプロパティ/メタデータの削除、リスト、取得、BLOB 層の設定をはじめとする有効なアーカイブ操作にはすべて、ホットとクールとの間で 100% の一貫性が確保されています。 アーカイブ層に保存されている BLOB の読み取りと変更はできません。

**BLOB をアーカイブ層からホット層またはクール層にリハイドレートするとき、リハイドレートが完了したことは、どのようにしてわかるのですか。**

リハイドレート中は、BLOB のプロパティの取得操作で**アーカイブ ステータス**属性をポーリングすることにより、層変更がいつ完了したかを確認できます。 ステータスは、変更先の層に応じて "rehydrate-pending-to-hot" または "rehydrate-pending-to-cool" になります。 完了すると、アーカイブ ステータス プロパティが削除され、BLOB の**アクセス層**プロパティに新しい階層としてホット層またはクール層が反映されます。  

**BLOB の層を設定した後、いつから該当料金で課金されるのですか。**

それぞれの BLOB は常に、BLOB の**アクセス層**プロパティによって示された階層に基づいて課金されます。 アーカイブからホットまたはアーカイブからクールに BLOB をリハイドレートする場合を除き、すべての移行作業では、BLOB に対して新しい層を設定すると、その新しい層が、**アクセス層**プロパティに直ちに反映されます。アーカイブからホットまたはアーカイブからクールに BLOB をリハイドレートする場合は、完了までに数時間かかることがあります。 その場合は、リハイドレートが完了するまでアーカイブの料金が引き続き適用され、リハイドレートが完了した時点で、**アクセス層**プロパティに新しい層が反映されます。 ホットまたはクールの料金は、その時点で初めて適用されます。

**クール層またはアーカイブ層から BLOB を移動したとき、早期削除料金が発生したかどうかは、どのようにしてわかるのですか。**

クール層 (GPv2 アカウントのみ) またはアーカイブ層から、それぞれ 30 日前または 180 日前に削除または移動された BLOB には、日割り計算された早期削除料金が発生します。 BLOB がクール層またはアーカイブ層に保管されていた時間は、BLOB の**アクセス層変更時間**プロパティを調べて、最後に層変更が実行されたタイムスタンプを得ることで判断できます。 詳細については、「[クールとアーカイブの早期削除](#cool-and-archive-early-deletion)」を参照してください。

**BLOB レベルの階層制御とアーカイブ ストレージは、どの Azure ツールと SDK でサポートされていますか。**

BLOB レベルの階層制御とアーカイブ ストレージは、Azure Portal、PowerShell、CLI の各ツールに加え、.NET、Java、Python、Node.js の各クライアント ライブラリでサポートされます。  

**ホット、クール、アーカイブの各層には、どの程度の量のデータを保存できますか。**

データ ストレージの上限は、ストレージ層ごとに設定されるのではなく、その他の制限と共にアカウント レベルで設定されます。 そのため、すべての制限を 1 つの階層で使用するか、3 つすべての階層で使用するかは、ユーザーが選択できます。 詳細については、「 [Azure Storage のスケーラビリティおよびパフォーマンスのターゲット](../common/storage-scalability-targets.md?toc=%2fazure%2fstorage%2fblobs%2ftoc.json) 」を参照してください。

## <a name="next-steps"></a>次の手順

### <a name="evaluate-hot-cool-and-archive-in-gpv2-blob-storage-accounts"></a>GPv2 BLOB ストレージ アカウントにおけるホット、クール、アーカイブの評価

[ホット、クール、アーカイブのリージョンごとの提供状況を確認する](https://azure.microsoft.com/regions/#services)

[Azure Blob Storage のライフサイクルの管理](https://docs.microsoft.com/en-us/azure/storage/common/storage-lifecycle-managment-concepts)

[Azure Storage のメトリックを有効にして現在のストレージ アカウントの使用状況を評価する](../common/storage-enable-and-view-metrics.md?toc=%2fazure%2fstorage%2fblobs%2ftoc.json)

[BLOB ストレージ アカウントと GPv2 アカウントのホット、クール、アーカイブのリージョンごとの料金を確認する](https://azure.microsoft.com/pricing/details/storage/)

[データ転送の価格を確認する](https://azure.microsoft.com/pricing/details/data-transfers/)
