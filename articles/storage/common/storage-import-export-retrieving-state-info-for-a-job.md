---
title: Azure Import/Export ジョブの状態情報の取得 | Microsoft Docs
description: Microsoft Azure Import/Export サービス ジョブの状態情報を取得する方法について説明します。
author: muralikk
services: storage
ms.service: storage
ms.topic: article
ms.date: 12/16/2016
ms.author: muralikk
ms.component: common
ms.openlocfilehash: 76b2f73442261da4c791aaae8532d7a0dbbb6d95
ms.sourcegitcommit: 9819e9782be4a943534829d5b77cf60dea4290a2
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/06/2018
ms.locfileid: "39520608"
---
# <a name="retrieving-state-information-for-an-importexport-job"></a>Import/Export ジョブの状態情報の取得
[Get Job](/rest/api/storageimportexport/jobs#Jobs_Get) 操作を呼び出して、インポートとエクスポートの両方のジョブに関する情報を取得することができます。 返される情報には、次の情報が含まれます。

-   ジョブの現在の状態。

-   各ジョブのおおよその完了率。

-   各ドライブの現在の状態。

-   エラー ログと詳細ログ情報を含んでいる BLOB の URI (有効化されている場合)。

以下のセクションでは、`Get Job` 操作によって返される情報について説明します。

## <a name="job-states"></a>ジョブの状態
次の表と図は、ジョブのライフ サイクルを通じて発生する、状態の移行を説明したものです。 ジョブの現在の状態は、`Get Job` 操作を呼び出すことによって確認できます。

![JobStates](./media/storage-import-export-retrieving-state-info-for-a-job/JobStates.png "JobStates")

次の表は、ジョブの状態がどのように移行していくかについて説明したものです。

|ジョブの状態|説明|
|---------------|-----------------|
|`Creating`|Put Job 操作を呼び出すと、ジョブが作成され、その状態が `Creating` に設定されます。 ジョブの状態が `Creating` である間、インポート/エクスポート サービスでは、ドライブがデータ センターにまだ配送されていないと見なされます。 ジョブが `Creating` の状態で維持されるのは最大 2 週間で 、その後はサービスによって自動的に削除されます。<br /><br /> ジョブが `Creating` 状態のときに Update Job Properties 操作を呼び出した場合、ジョブは `Creating` 状態のまま維持され、タイムアウト間隔が 2 週間にリセットされます。|
|`Shipping`|パッケージを発送したら、Update Job Properties 操作を呼び出して、ジョブの状態を `Shipping` に更新する必要があります。 発送状態は、ジョブに対して `DeliveryPackage` (配送業者と追跡番号) および `ReturnAddress` プロパティが設定されている場合にのみ設定できます。<br /><br /> ジョブが "発送" の状態で維持されるのは最大 2 週間です。 2 週間が経過してもドライブの受け取りが完了しない場合は、Import/Export サービス オペレーターに通知が送られます。|
|`Received`|すべてのドライブがデータ センターで受け取られると、ジョブの状態が "受取済み" に設定されます。|
|`Transferring`|ドライブがデータ センターで受け取られ、少なくとも 1 つのドライブの処理が開始されると、ジョブの状態が `Transferring` に設定されます。 詳しくは、後述する「`Drive States`」セクションをご覧ください。|
|`Packaging`|すべてのドライブの処理が完了してから、ドライブがお客様に返送されるまでの間、ジョブの状態は `Packaging` に設定されます。|
|`Completed`|すべてのドライブがお客様へ返送され、ジョブがエラーなく完了すると、ジョブの状態が `Completed` に設定されます。 `Completed` 状態になってから 90 日が経過すると、ジョブは自動的に削除されます。|
|`Closed`|すべてのドライブがお客様へ返送された後、ジョブの処理中に何らかのエラーが発生した場合は、ジョブの状態が `Closed` に設定されます。 `Closed` 状態になってから 90 日が経過すると、ジョブは自動的に削除されます。|

ジョブの取り消しは、特定の状態のときにのみ実行できます。 取り消されたジョブについてはデータのコピー手順がスキップされますが、その点を除いては、取り消されなかったジョブと同様に状態の移行が進んでいきます。

次の表は、ジョブの各状態で起こりえるエラーと、エラーが発生した場合のジョブへの影響について説明したものです。

|ジョブの状態|Event|解決方法/次の手順|
|---------------|-----------|------------------------------|
|`Creating or Undefined`|ジョブの対象であるドライブが 1 つ以上到着したが、ジョブの状態が `Shipping` になっていない。または、サービスにジョブのレコードがない。|Import/Export サービスのオペレーション チームがお客様に連絡し、必要な情報を取得してジョブを作成または更新して、ジョブの処理を進めようと試みます。<br /><br /> 2 週間以内にお客様に連絡できなかった場合、オペレーション チームはドライブの返却を試みます。<br /><br /> ドライブを返却することができず、お客様への連絡もつかない場合、ドライブは 90 日以内に安全な方法で破棄されます。<br /><br /> ジョブの処理は、状態が `Shipping` に更新されるまで進めることができません。|
|`Shipping`|2 週間以上経過してもジョブのパッケージが到着しない。|オペレーション チームは、パッケージが受け取られていないことをお客様に通知します。 お客様の応答に基づいて、オペレーション チームはパッケージが届くまでの待機期間を延長するか、またはジョブを取り消します。<br /><br /> お客様への連絡がつかないか、または 30 日以内に応答がなかった場合、オペレーション チームはジョブの状態を `Shipping` から `Closed` に直接移行するためのアクションを開始します。|
|`Completed/Closed`|ドライブが返送先住所に届かなかったか、または配送中に破損した (エクスポート ジョブにのみ適用されます)。|ドライブが返送先住所に届かなかった場合、お客様はまず、Get Job 操作を呼び出すか、またはポータルでジョブの状態をチェックして、ドライブが発送されていることを確認する必要があります。 ドライブが発送されている場合、お客様は配送業者に連絡して、ドライブの所在を確認する必要があります。<br /><br /> 配送中にドライブが破損した場合、お客様は別のエクスポート ジョブを要求するか、または足りない BLOB をダウンロードできます。|
|`Transferring/Packaging`|ジョブに対して間違った住所が指定されたか、指定されなかった。|オペレーション チームがジョブの連絡担当者に連絡し、正しい住所を取得します。<br /><br /> お客様への連絡がつかない場合、ドライブは 90 日以内に安全な方法で破棄されます。|
|`Creating / Shipping/ Transferring`|インポートするドライブの一覧に含まれていないドライブが、配送パッケージに含まれている。|登録外のドライブは処理されず、ジョブの完了後にお客様に返却されます。|

## <a name="drive-states"></a>ドライブの状態
次の表と図は、各ドライブがインポート ジョブやエクスポート ジョブを通じて処理されるまでのライフ サイクルを説明したものです。 ドライブの現在の状態は、`Get Job` 操作を呼び出して、`DriveList` プロパティの `State` 要素を調べることで取得できます。

![DriveStates](./media/storage-import-export-retrieving-state-info-for-a-job/DriveStates.png "DriveStates")

次の表は、ドライブの状態がどのように移行していくかについて説明したものです。

|ドライブの状態|説明|
|-----------------|-----------------|
|`Specified`|インポート ジョブの場合、Put Job 操作を使用してジョブが作成されたときのドライブの初期状態は `Specified` です。 エクスポート ジョブの場合、ジョブの作成時にドライブは指定されないので、ドライブの初期状態は `Received` です。|
|`Received`|インポート/エクスポート サービスのオペレーターがインポート ジョブの配送業者から受け取ったドライブを処理すると、ドライブの状態が `Received` に変わります。 エクスポート ジョブの場合は、`Received` がドライブの初期状態になります。|
|`NeverReceived`|ジョブのパッケージが到着したものの、パッケージにドライブが含まれていなかった場合は、ドライブの状態が `NeverReceived` になります。 また、出荷情報を受信してから 2 週間経過してもパッケージがデータ センターに到着しない場合にも、このドライブ状態が設定されます。|
|`Transferring`|ドライブから Windows Azure Storage へのデータ転送が開始されると、ドライブの状態が `Transferring` に変わります。|
|`Completed`|すべてのデータがエラーなく正常に転送されると、ドライブの状態が `Completed` に変わります。|
|`CompletedMoreInfo`|ドライブとストレージ間でのデータ コピー中に何らかの問題が発生した場合は、ドライブの状態が `CompletedMoreInfo` に変わります。 この情報には、エラー、警告、または BLOB の上書きに関する情報メッセージが含まれる場合があります。|
|`ShippedBack`|データ センターから返送先に向けてドライブが発送されると、ドライブの状態が `ShippedBack` に変わります。|

次の表は、ドライブのエラー状態と、各状態に対して実行されるアクションを示したものです。

|ドライブの状態|Event|解決方法/次の手順|
|-----------------|-----------|-----------------------------|
|`NeverReceived`|`NeverReceived` としてマークされたドライブ (ジョブの出荷プロセスを通じて受け取られなかったドライブ) は、別便で配送されます。|ドライブの状態は、オペレーション チームによって `Received` に変更されます。|
|`N/A`|ジョブの対象でないドライブは、別のジョブを通じてデータ センターに配送されます。|これらのドライブは追加ドライブとしてマークされ、元のパッケージに関連付けられたジョブが完了したときに、お客様に返送されます。|

## <a name="faulted-states"></a>Faulted 状態
ジョブやドライブがライフ サイクルの過程で正常に処理されなかった場合は、ジョブまたはドライブの状態が `Faulted` に移行されます。 その場合、オペレーション チームは電子メールまたは電話でユーザーに連絡をとります。 問題が解決されると、エラー状態のジョブやドライブは `Faulted` 状態を解除され、適切な状態に移行されます。

## <a name="next-steps"></a>次の手順

* [Import/Export サービス REST API の使用](storage-import-export-using-the-rest-api.md)
