---
title: 障害のトラブルシューティングと診断 - Azure Logic Apps | Microsoft Docs
description: ロジック アプリが失敗する状況と理由について
services: logic-apps
documentationcenter: ''
author: jeffhollan
manager: jeconnoc
editor: ''
ms.assetid: a6727ebd-39bd-4298-9e68-2ae98738576e
ms.service: logic-apps
ms.devlang: ''
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: logic-apps
ms.date: 10/15/2017
ms.author: LADocs; jehollan
ms.openlocfilehash: b0bf6cd747860d938f80787d9bef6634a6a22d09
ms.sourcegitcommit: 86cb3855e1368e5a74f21fdd71684c78a1f907ac
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/03/2018
ms.locfileid: "37441534"
---
# <a name="troubleshoot-and-diagnose-logic-app-failures"></a>ロジック アプリの障害のトラブルシューティングと診断

ロジック アプリでは、アプリの問題の診断とデバッグに役立つ情報が生成されます。 ロジック アプリを診断するには、Azure Portal でワークフローの各手順を確認します。 また、ランタイム デバッグのための手順をいくつかワークフローに追加することもできます。

## <a name="review-trigger-history"></a>トリガー履歴を確認する

ロジック アプリはすべて、トリガーで始まります。 トリガーが起動しない場合は、まず、トリガーの履歴を確認してください。 この履歴には、ロジック アプリによるすべてのトリガー試行と、各トリガー試行の入出力の詳細が表示されます。

1. トリガーが起動したかどうかを確認するには、ロジック アプリのメニューの **[概要]** を選択します。 **[トリガーの履歴]** で、トリガーの状態を確認します。

   > [!TIP]
   > ロジック アプリのメニューが表示されない場合は、Azure ダッシュボードに戻り、ロジック アプリを開き直してください。

   ![トリガー履歴を確認する](./media/logic-apps-diagnosing-failures/logic-app-trigger-history-overview.png)

   > [!TIP]
   > * 必要なデータが見つからない場合は、ツール バーの **[更新]** を選択してみます。
   > * 一覧に多数のトリガー試行が表示され、必要なエントリが見つからない場合は、一覧にフィルターを適用してみます。

   トリガー試行には次のような状態があります。

   | 状態 | 説明 | 
   | ------ | ----------- | 
   | **成功** | トリガーによりエンドポイントがチェックされ、使用可能なデータが見つかりました。 通常、この状態は、"起動済み" と共に表示されます。 表示されない場合、トリガー定義に、十分でない条件または `SplitOn` コマンドが含まれる可能性があります。 <p>この状態は、手動トリガー、繰り返しトリガー、またはポーリング トリガーに適用できます。 トリガーは正常に実行できますが、アクションによって未処理のエラーが生成されると、実行自体が引き続き失敗する可能性があります。 | 
   | **スキップ済み** | トリガーによりエンドポイントがチェックされましたが、データが見つかりませんでした。 | 
   | **失敗** | エラーが発生しました。 失敗したトリガーに対して生成されたエラー メッセージを確認するには、そのトリガー試行を選択し、**[出力]** を選択します。 たとえば、無効な入力が見つかる場合があります。 | 
   ||| 

   同じ日時のトリガー エントリが複数ある場合があります。これは、ロジック アプリによって複数の項目が検出された場合に発生します。 
   トリガーが起動されるたびに、Logic Apps エンジンは、ワークフローを実行するロジック アプリ インスタンスを作成します。 既定では、各インスタンスが並列で実行されるため、ワークフローは待ち時間なしで実行が開始されます。

   > [!TIP]
   > トリガーの再チェックは、そのトリガーが次回起動されるのを待たずに実行できます。 概要ツール バーで、**[トリガーの実行]** を選択し、トリガーを選択すると、チェックが強制的に実行されます。 または、Logic Apps デザイナー ツール バーで **[実行]** を選択します。

3. トリガー試行の詳細を確認するには、**[トリガーの履歴]** で、そのトリガー試行を選択します。 

   ![トリガー試行を選択する](./media/logic-apps-diagnosing-failures/logic-app-trigger-history.png)

4. 入力と、トリガーによって生成されたすべての出力を確認します。 トリガー出力には、トリガーから受け取ったデータが表示されます。 すべてのプロパティが予期したとおりに返されるかどうかを、これらの出力から確認できます。

   > [!NOTE]
   > 不明なコンテンツがある場合は、Azure Logic Apps における[各種コンテンツの扱い](../logic-apps/logic-apps-content-type.md)に関するページをご覧ください。

   ![トリガー出力](./media/logic-apps-diagnosing-failures/trigger-outputs.png)

## <a name="review-run-history"></a>実行履歴を確認する

起動されたトリガーごとに、ワークフローの実行が開始されます。 実行中に何が発生したか、たとえば、ワークフローの各手順の状態や、各手順の入出力を確認することができます。

1. ロジック アプリのメニューで、**[概要]** を選択します。 **[実行の履歴]** で、起動されたトリガーの実行を確認します。

   > [!TIP]
   > ロジック アプリのメニューが表示されない場合は、Azure ダッシュボードに戻り、ロジック アプリを開き直してください。

   ![実行履歴を確認する](./media/logic-apps-diagnosing-failures/logic-app-runs-history-overview.png)

   > [!TIP]
   > * 必要なデータが見つからない場合は、ツール バーの **[更新]** を選択してみます。
   > * 一覧に多数の実行が表示され、必要なエントリが見つからない場合は、一覧にフィルターを適用してみます。

   実行には次のような状態があります。

   | 状態 | 説明 | 
   | ------ | ----------- | 
   | **成功** | アクションはすべて成功しています。 <p>特定のアクションでエラーが発生した場合、そのエラーは、ワークフローの後続のアクションによって処理済みです。 | 
   | **失敗** | 少なくとも 1 つのアクションに失敗し、その失敗は、ワークフローの後続のアクションによって処理されていません。 | 
   | **取り消し済み** | ワークフローは実行されていましたが、キャンセル要求を受け取りました。 | 
   | **実行中** | ワークフローは現在実行中です。 <p>この状態は、ワークフローのスロットル、または現行の価格プランが原因で発生している可能性があります。 詳細については、[価格ページのアクション制限](https://azure.microsoft.com/pricing/details/logic-apps/)に関するページをご覧ください。 [診断ログ](../logic-apps/logic-apps-monitor-your-logic-apps.md)を設定すると、発生するスロットル イベントに関する情報を取得することもできます。 | 
   ||| 

2. 特定の実行の手順ごとに詳細を確認します。 **[実行の履歴]** で、確認する実行を選択します。

   ![実行履歴を確認する](./media/logic-apps-diagnosing-failures/logic-app-run-history.png)

   実行自体が成功しても失敗しても、[実行の詳細] ビューには、各手順と、実行が成功したか失敗したかが表示されます。

   ![ロジック アプリの実行の詳細を表示する](./media/logic-apps-diagnosing-failures/logic-app-run-details.png)

3. 特定の手順の入出力と、エラー メッセージを確認するには、手順を選択します。これにより、シェイプを拡張され、詳細が表示されます。 例: 

   ![ステップの詳細を表示する](./media/logic-apps-diagnosing-failures/logic-app-run-details-expanded.png)

## <a name="perform-runtime-debugging"></a>ランタイム デバッグを実行する

デバッグを行いやすいように、トリガーや実行の履歴を確認するほか、診断手順をワークフローに追加することができます。 たとえば、[Webhook Tester](https://webhook.site/) サービスを使用する手順を追加できます。これにより、HTTP 要求を調べて、正確なサイズ、シェイプ、および形式を特定できます。

1. [Webhook Tester](https://webhook.site/) にアクセスし、作成された一意の URL をコピーします

2. ロジック アプリで、テスト対象の HTTP POST アクションと本文コンテンツを追加します (式、別の手順の出力など)。

3. Webhook Tester の URL を HTTP POST アクションに貼り付けます。

4. 要求が Logic Apps エンジンからの生成時にどのように形成されたかを確認するには、ロジック アプリを実行し、詳細を Webhook Tester で確認します。

## <a name="next-steps"></a>次の手順

[ロジック アプリを監視する](../logic-apps/logic-apps-monitor-your-logic-apps.md)
